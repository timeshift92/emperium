# üß± –ó–∞–¥–∞—á–∏ –¥–ª—è Copilot ‚Äî Imperium Universe (v4)

## 0) –û—Å–Ω–æ–≤—ã –ø—Ä–æ–µ–∫—Ç–∞
[x] Aspire-—Ä–µ—à–µ–Ω–∏–µ: Api/Domain/Infrastructure/Llm/AppHost/ServiceDefaults
[x] EF Core SQLite, –º–∏–≥—Ä–∞—Ü–∏–∏, —Å–∏–¥–µ—Ä—ã (`db.Database.Migrate()` –Ω–∞ —Å—Ç–∞—Ä—Ç–µ)
[x] TickWorker: —É–ø–æ—Ä—è–¥–æ—á–µ–Ω–Ω—ã–µ —Ñ–∞–∑—ã (Time ‚Üí Weather/Season ‚Üí Economy ‚Üí NPC ‚Üí Dispatch)
[x] –ú–µ—Ç—Ä–∏–∫–∏/–Ω–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç—å: OpenTelemetry/Prometheus, —Å—á—ë—Ç—á–∏–∫–∏ —Ç–∏–∫–æ–≤, LLM-–≤—ã–∑–æ–≤–æ–≤, –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ñ–∞–∑ ‚Äî `/metrics`, Meter `Imperium.Api.Metrics` (tick/agent duration, economy/logistics/npc counters)

## 1) –ú–æ–¥–µ–ª–∏ –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç
[x] WorldTime, SeasonState, WeatherSnapshot
[x] Location, Faction (—Å–∫–µ–ª–µ—Ç), Army (—Å–∫–µ–ª–µ—Ç)
[x] Character (+`EssenceJson`, `SkillsJson`, `History`, `LocationName`)
[x] Relationship (`SourceId`, `TargetId`, `Type`, `Trust`, `Love`, `Hostility`)
[x] Ownership (–±–∞–∑–æ–≤–∞—è), NpcMemory (—Å–∫–µ–ª–µ—Ç)
[x] EconomySnapshot, Building (—Å–∫–µ–ª–µ—Ç)
  [x] Household (–≥–ª–∞–≤–∞, —á–ª–µ–Ω—ã, –∏–º—É—â–µ—Å—Ç–≤–æ, –æ–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞) ‚Äî –±–∞–∑–æ–≤–∞—è –º–æ–¥–µ–ª—å/—ç–Ω–¥–ø–æ–∏–Ω—Ç—ã/–ø–∞–Ω–µ–ª—å: `Household`, `Families`, `HouseholdsPanel`
  [x] InheritanceRecord (–ø—Ä–∞–≤–∏–ª–∞ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è, —Å–ø–æ—Ä) ‚Äî –±–∞–∑–æ–≤–∞—è –º–æ–¥–µ–ª—å, DbSet –∏ dev-—ç–Ω–¥–ø–æ–∏–Ω—Ç—ã —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã (–ª–∏—Å—Ç/—Å–æ–∑–¥–∞—Ç—å/resolve-dev)
  - ‚ÑπÔ∏è –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: —Å–µ–π—á–∞—Å `ResolveInheritanceDev` –≤—ã–ø–æ–ª–Ω—è–µ—Ç –ª–∏—à—å –±–µ–∑–æ–ø–∞—Å–Ω—É—é –æ–ø–µ—Ä–∞—Ü–∏—é ‚Äî —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ `resolution` –∏ –∑–∞–ø–∏—Å—å `GameEvent`. –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏: —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–µ—Ä–µ–Ω–æ—Å –±–æ–≥–∞—Ç—Å—Ç–≤–∞/Ownership (—Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω–æ), –¥–æ–±–∞–≤–∏—Ç—å —é–Ω–∏—Ç-/–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –¥–ª—è —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ –∏ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å traceId –≤ `GameEvent.PayloadJson` –¥–ª—è —É—Å—Ç–æ–π—á–∏–≤–æ–π –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏.
  - üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ: `meta.traceId` —Ç–µ–ø–µ—Ä—å –≤–∫–ª—é—á–∞–µ—Ç—Å—è –≤ `GameEvent.PayloadJson`; –¥–æ–±–∞–≤–ª–µ–Ω seedable random / TieBreakerOption –∏ —É–ª—É—á—à–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –Ω–∞—Å–ª–µ–¥—Å—Ç–≤–∞ (–º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –µ–¥–∏–Ω–∏—Ü–∞ –≤–∞–ª—é—Ç—ã + –∞–ª–≥–æ—Ä–∏—Ç–º –Ω–∞–∏–±–æ–ª—å—à–µ–≥–æ –æ—Å—Ç–∞—Ç–∫–∞). `OwnershipAgent` —Å–æ–∑–¥–∞—ë—Ç –∑–∞–ø–∏—Å–∏ –≤–ª–∞–¥–µ–Ω–∏—è –ø—Ä–∏ `AcquisitionType == "inheritance"`. –ü–æ–ª–Ω—ã–π –ø–µ—Ä–µ–Ω–æ—Å –±–æ–≥–∞—Ç—Å—Ç–≤–∞ –æ—Å—Ç–∞—ë—Ç—Å—è –¥–∞–ª—å–Ω–µ–π—à–µ–π –∑–∞–¥–∞—á–µ–π.
[x] Genealogy (—Ä–æ–¥—Å—Ç–≤–æ, —Å–µ–º–µ–π–Ω—ã–µ –≤–µ—Ç–≤–∏) ‚Äî `GenealogyRecord` (DbSet), API `/api/characters/{id}/genealogy` –∏ UI `NpcProfiles` –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –≤—ã–≤–æ–¥
[ ] TalentDevelopment (aptitude, —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏, –æ–ø—ã—Ç –ø–æ –ø–æ–¥‚Äë—Å–∫–∏–ª–ª–∞–º)
[ ] Technology, KnowledgeField, Discovery, KnowledgeWave, RegionalKnowledge
[ ] Rumor (–∏—Å—Ç–æ—á–Ω–∏–∫/–¥–æ—Å—Ç–æ–≤–µ—Ä–Ω–æ—Å—Ç—å/—Ä–∞–¥–∏—É—Å/TTL)
[ ] Deity, Cult, Ritual, Festival
[ ] HealthState, Livestock/Fishery/Hunting —Ä–µ—Å—É—Ä—Å—ã
[ ] CommRoute, Courier/PigeonPost (–º–∞—Ä—à—Ä—É—Ç—ã –∏ –≤—Ä–µ–º—è –¥–æ—Å—Ç–∞–≤–∫–∏)
[x] WorldChronicle, GameEvent

## 2) –ê–≥–µ–Ω—Ç—ã (–º–∏–Ω–∏–º–∞–ª—å–Ω–æ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω—ã–π –º–∏—Ä)
[x] TimeAI ‚Äî —Ö–æ–¥ –≤—Ä–µ–º–µ–Ω–∏/—Å—É—Ç–æ–∫
[x] WeatherAI/WorldAI ‚Äî –ø–æ–≥–æ–¥–∞, –¥–ª–∏–Ω–∞ –¥–Ω—è, –∞–Ω–æ–º–∞–ª–∏–∏
[x] SeasonAI ‚Äî —Å–µ–∑–æ–Ω –ø–æ –∫–ª–∏–º–∞—Ç—É/–≥–µ–æ
[x] EconomyAI ‚Äî —Ü–µ–Ω—ã, –Ω–∞–ª–æ–≥–∏, –∑–∞–ø–∞—Å—ã
[x] CivilizationGenesisService ‚Äî –ø—Ä–æ–¥–≤–∏–∂–µ–Ω–∏–µ –ø–ª–µ–º—ë–Ω –≤ –≥–æ—Ä–æ–¥—Å–∫–∏–µ –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–∞ –∏ —Å–æ–∑–¥–∞–Ω–∏–µ —Ä–∞–Ω–Ω–µ–π —ç–∫–æ–Ω–æ–º–∏–∫–∏
[x] RelationshipAI ‚Äî marriage/betrayal/child_birth
[x] NpcAI ‚Äî –∫–æ—Ä–æ—Ç–∫–∏–µ —Ä–µ–ø–ª–∏–∫–∏ (<=35 —Å–ª–æ–≤, —ç–ø–æ—Ö–∞–ª—å–Ω—ã–π —Å—Ç–∏–ª—å)
[x] EventDispatcher ‚Äî –∑–∞–ø–∏—Å—å/—Å—Ç—Ä–∏–º `GameEvent`
[ ] NatureAI ‚Äî —É—Ä–æ–∂–∞–π, —Ñ–∞—É–Ω–∞, —ç–ø–∏–¥–µ–º–∏–∏
[ ] PropertyAI ‚Äî –ø–µ—Ä–µ—Ö–æ–¥—ã –∏–º—É—â–µ—Å—Ç–≤–∞, –∞—Ä–µ–Ω–¥–∞, –∫–æ–Ω—Ñ–∏—Å–∫–∞—Ü–∏–∏
[ ] InheritanceAI ‚Äî —Å–º–µ—Ä—Ç–∏, –∑–∞–≤–µ—â–∞–Ω–∏—è, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ Household/Genealogy
[ ] KnowledgeAI ‚Äî –ø—Ä–æ–≥—Ä–µ—Å—Å –æ–±–ª–∞—Å—Ç–µ–π –∑–Ω–∞–Ω–∏–π, –ª–æ–∫–∞–ª—å–Ω—ã–µ –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã
[ ] InnovationAI ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π/–æ—Ç–∫—Ä—ã—Ç–∏–π
[ ] KnowledgeDiffusionAI ‚Äî —Ç–æ—Ä–≥–æ–≤—ã–µ –ø—É—Ç–∏/–≥–æ–Ω—Ü—ã/–≥–æ–ª—É–±–∏/–º–æ–Ω–∞—Ö–∏
[ ] ScholarAI ‚Äî —à–∫–æ–ª—ã, –º–∞—Å—Ç–µ—Ä-–ø–æ–¥–º–∞—Å—Ç–µ—Ä—å–µ, –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –ø–æ–¥-–Ω–∞–≤—ã–∫–∏
[ ] CrimeAI/LegalAI v2 ‚Äî –ø—Ä–µ—Å—Ç—É–ø–ª–µ–Ω–∏—è, —Å—É–¥, –Ω–∞–∫–∞–∑–∞–Ω–∏—è, –ø—Ä–µ—Ü–µ–¥–µ–Ω—Ç—ã
[ ] LogisticsAI ‚Äî –∫–∞—Ä–∞–≤–∞–Ω—ã/—Ñ–ª–æ—Ç, —à—Ç–æ—Ä–º—ã, –ø–∏—Ä–∞—Ç—ã
[ ] MarketAI ‚Äî —Å–ø—Ä–æ—Å/–ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ, –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å
[ ] CraftAI ‚Äî –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ, –±—Ä–∞–∫, –∏–∑–Ω–æ—Å
[ ] TransportAI ‚Äî —Å—Ç–æ–∏–º–æ—Å—Ç—å/–≤—Ä–µ–º—è –¥–æ—Å—Ç–∞–≤–∫–∏, —Ä–∏—Å–∫–∏
[ ] FreeWillAI/MoralAI ‚Äî —Ä–µ—à–µ–Ω–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –º–æ—Ä–∞–ª–∏/—Ä–µ–ø—É—Ç–∞—Ü–∏–∏
[ ] PerceptionAI ‚Äî –æ–±—â–µ—Å—Ç–≤–µ–Ω–Ω–∞—è —Ä–µ–∞–∫—Ü–∏—è
[ ] FaithAI/MythosAI/DreamAI/CultureAI ‚Äî —Ä–∏—Ç—É–∞–ª—ã, –∑–Ω–∞–º–µ–Ω–∏—è, —Å–Ω—ã, –ø—Ä–∞–∑–¥–Ω–∏–∫–∏
[ ] HistoryAI/DeepHistoryAI/ZeitgeistAI ‚Äî —Ö—Ä–æ–Ω–∏–∫–∏, –ø–∞–º—è—Ç—å —ç–ø–æ—Ö, –¥—É—Ö –≤—Ä–µ–º–µ–Ω–∏
[ ] ConflictAI/EmpireAI/PoliticsAI ‚Äî –≤–æ–π–Ω—ã, –≤—ã–±–æ—Ä—ã, –∑–∞–≥–æ–≤–æ—Ä—ã

## 3) –ß–µ–ª–æ–≤–µ–∫, –Ω–∞–≤—ã–∫–∏, —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
[ ] GeneticAI ‚Äî –Ω–∞—Å–ª–µ–¥—É–µ–º—ã–µ —Å–∫–ª–æ–Ω–Ω–æ—Å—Ç–∏, –º—É—Ç–∞—Ü–∏–∏ –ø—Ä–∏ —Ä–æ–∂–¥–µ–Ω–∏–∏
[ ] TalentAI ‚Äî –∞–∫—Ç–∏–≤–∞—Ü–∏—è –≤—Ä–æ–∂–¥—ë–Ω–Ω—ã—Ö/—Å–∫—Ä—ã—Ç—ã—Ö —Ç–∞–ª–∞–Ω—Ç–æ–≤
[ ] TraitAI ‚Äî —Å–æ—Å—Ç–æ—è–Ω–∏—è, –∞–Ω–æ–º–∞–ª–∏–∏, –±–æ–ª–µ–∑–Ω–∏
[ ] SkillAI ‚Äî —Ä–æ—Å—Ç/–¥–µ–≥—Ä–∞–¥–∞—Ü–∏—è, –ø–æ–¥-–¥–∏—Å—Ü–∏–ø–ª–∏–Ω—ã (–ø—Ä–∏–º–µ—Ä: –≤–æ–∏–Ω‚Üí—Ç–∞–∫—Ç–∏–∫/–æ—Å–∞–¥–∞/—Ñ–ª–æ—Ç)
[ ] Training/Institutions ‚Äî –æ–±—É—á–µ–Ω–∏–µ —É –º–∞—Å—Ç–µ—Ä–æ–≤, —Å—Ç–æ–∏–º–æ—Å—Ç—å –∏ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
[ ] NpcMemory v2 ‚Äî –¥–æ–ª–≥–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –ø–∞–º—è—Ç—å, –æ–±–µ—â–∞–Ω–∏—è/–¥–æ–ª–≥–∏, –ª–æ–∫–∞–ª—å–Ω—ã–µ —Å–ª—É—Ö–∏

## 4) –ó–Ω–∞–Ω–∏—è –∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
[ ] –ú–æ–¥–µ–ª–∏: KnowledgeField, Technology, Discovery, RegionalKnowledge, KnowledgeWave
[ ] –ê–≥–µ–Ω—Ç—ã: KnowledgeAI, InnovationAI, KnowledgeDiffusionAI, ScholarAI
[ ] –ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏: —Ç–æ—Ä–≥–æ–≤—Ü—ã/–≥–æ–Ω—Ü—ã/–≥–æ–ª—É–±–∏–Ω–∞—è –ø–æ—á—Ç–∞/–º–æ–Ω–∞—Ö–∏, –∑–∞–¥–µ—Ä–∂–∫–∏, –∏–∑–æ–ª—è—Ü–∏—è —Ä–µ–≥–∏–æ–Ω–æ–≤

## 5) –í–µ—Ä–∞, –∫—É–ª—å—Ç—É—Ä–∞ –∏ –∏—Å—Ç–æ—Ä–∏—è
[ ] –ú–æ–¥–µ–ª–∏: Deity, Cult, Ritual, Festival
[ ] FaithAI/MythosAI/CultureAI ‚Äî —Ä–∏—Ç—É–∞–ª—ã, –∑–Ω–∞–º–µ–Ω–∏—è, –ø—Ä–∞–∑–¥–Ω–∏–∫–∏
[ ] DreamAI ‚Äî —Å–Ω—ã –∫–∞–∫ –ø–æ–¥—Å–∫–∞–∑–∫–∏ –∏ —Å—é–∂–µ—Ç–Ω—ã–µ –∫—Ä—é—á–∫–∏
[ ] HistoryAI ‚Äî –≥–æ–¥–æ–≤–æ–π summary, WorldChronicle
[ ] DeepHistoryAI ‚Äî –ø–∞–º—è—Ç—å —ç–ø–æ—Ö
[ ] ZeitgeistAI ‚Äî –¥—É—Ö –≤—Ä–µ–º–µ–Ω–∏, –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –≤–æ–π–Ω—ã/–æ—Ç–∫—Ä—ã—Ç–∏—è

## 6) –í–ª–∞—Å—Ç—å, –ø—Ä–∞–≤–æ –∏ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å
[ ] OwnershipAI/PropertyAI ‚Äî —Ä—ã–Ω–æ–∫ –∑–µ–º–ª–∏/–¥–æ–º–æ–≤/—Å–∫–æ—Ç–∞, –∞—Ä–µ–Ω–¥–∞, –∫–æ–Ω—Ñ–∏—Å–∫–∞—Ü–∏–∏
[ ] LegalAI v2 ‚Äî –∫–æ–¥–µ–∫—Å—ã, —Å—É–¥, —à—Ç—Ä–∞—Ñ—ã, —Å—Å—ã–ª–∫–∏, –ø—Ä–µ—Ü–µ–¥–µ–Ω—Ç—ã
[ ] EmpireAI/PoliticsAI/ConflictAI ‚Äî –≤–Ω–µ—à–Ω—è—è –∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –¥–∏–Ω–∞–º–∏–∫–∞

## 7) –≠–∫–æ–Ω–æ–º–∏–∫–∞ –∏ –ª–æ–≥–∏—Å—Ç–∏–∫–∞
[ ] CraftAI / MarketAI / TransportAI / LogisticsAI (–ø—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è –≤–µ—Ä—Å–∏—è)
[ ] –£–∑–ª—ã —Ç–æ—Ä–≥–æ–≤–ª–∏ (–ø–æ—Ä—Ç/–±–∞–∑–∞—Ä/—Å–∫–ª–∞–¥), –≤–ª–∏—è–Ω–∏–µ —à—Ç–æ—Ä–º–æ–≤/–≤–µ—Ç—Ä–æ–≤
[ ] –†—ã–±–æ–ª–æ–≤—Å—Ç–≤–æ/–æ—Ö–æ—Ç–∞/—Å–∫–æ—Ç–æ–≤–æ–¥—Å—Ç–≤–æ ‚Äî —Å–µ–∑–æ–Ω–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

## 8) –ü—Ä–æ–º–ø—Ç—ã (Prompts.cs) ‚Äî —Å—Ç—Ä–æ–≥–æ JSON
[x] WeatherSnapshot ‚Üí { condition, temperatureC, windKph, precipitationMm, dayLength }
[x] NpcReply ‚Üí { reply, moodDelta?, loyaltyDelta? }
[ ] KnowledgeDiscovery ‚Üí { name, field, effect, impact, region }
[ ] RumorPrompt ‚Üí { text, credibility, spreadRadiusKm, ttlTicks }
[ ] LegalDecision ‚Üí { verdict, penalty, precedentNote }
[ ] HistorySummary ‚Üí { summary, highlights[] }
[ ] Dream ‚Üí { symbol, meaning, action }
[ ] MythosEffect ‚Üí { omen, crowdEffect, duration }

## 9) –°–∏–¥ –Ω–∞—á–∞–ª—å–Ω–æ–≥–æ –º–∏—Ä–∞ (Sicilia Seed)
[ ] –ì–µ–æ–≥—Ä–∞—Ñ–∏—è: –°–∏—Ä–∞–∫—É–∑—ã + –¥–µ—Ä–µ–≤–Ω–∏, –ø–æ—Ä—Ç, —Ö—Ä–∞–º, –º–∞—Å—Ç–µ—Ä—Å–∫–∏–µ, —Ä—ã–±–∞—Ü–∫–∞—è –∞—Ä—Ç–µ–ª—å
[ ] –§—Ä–∞–∫—Ü–∏–∏: —Å–æ–≤–µ—Ç, —Ä–µ–º–µ—Å–ª–µ–Ω–Ω–∏–∫–∏, —Ç–æ—Ä–≥–æ–≤—Ü—ã, –∂—Ä–µ—Ü—ã, –≥–∞—Ä–Ω–∏–∑–æ–Ω
[ ] –¢–æ—Ä–≥–æ–≤—ã–µ –ª–∏–Ω–∏–∏: –ø—Ä–∏–±—Ä–µ–∂–Ω—ã–µ —Ä–µ–π—Å—ã, –∫–∞—Ä–∞–≤–∞–Ω—ã –≤–≥–ª—É–±—å –æ—Å—Ç—Ä–æ–≤–∞
[ ] –ù–∞—á–∞–ª—å–Ω—ã–µ –∑–Ω–∞–Ω–∏—è/—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏: –∞–Ω—Ç–∏—á–Ω—ã–π baseline
[ ] –ù–∞—á–∞–ª—å–Ω—ã–µ —à–∫–æ–ª—ã/–º–∞—Å—Ç–µ—Ä–∞ –∏ —É—á–µ–Ω–∏–∫–∏
[ ] –†–µ–ø—É—Ç–∞—Ü–∏–∏ –∏ —Å–µ–º–µ–π–Ω—ã–µ –ª–∏–Ω–∏–∏ –¥–ª—è —Å—Ç–∞—Ä—Ç–∞

## 10) API / Frontend (MVP Web)
[x] REST: `/api/characters`, `/api/characters/{id}`, `/api/characters/{id}/events`
[x] Dev endpoints: `/api/dev/seed-characters`, `/api/dev/reset-characters`, `/api/dev/tick-now`
[x] SSE `/api/events/stream` (—á–µ—Ä–µ–∑ EventDispatcher)
[x] SignalR `/hubs/events` (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ SSE) ‚Äî EventsHub + –∫–ª–∏–µ–Ω—Ç imperium-web-v2 (fallback –Ω–∞ mock)
[x] Frontend v2: –≤–∫–ª–∞–¥–∫–∏ ‚Äú–°–æ–±—ã—Ç–∏—è/–ü–µ—Ä—Å–æ–Ω–∞–∂–∏/–≠–∫–æ–Ω–æ–º–∏–∫–∞‚Äù, —Ñ–∏–ª—å—Ç—Ä—ã –∏ –ø–æ–∏—Å–∫
[ ] –ü–∞–Ω–µ–ª—å —ç–∫–æ–Ω–æ–º–∏–∫–∏ —Å –∂–∏–≤—ã–º–∏ –º–µ—Ç—Ä–∏–∫–∞–º–∏ (—Ü–µ–Ω–æ–≤—ã–µ —Ä—è–¥—ã, –∑–∞–ø–∞—Å—ã, –Ω–∞–ª–æ–≥–∏)
[ ] –ü–∞–Ω–µ–ª—å —É–∫–∞–∑–æ–≤ (Council) —Å —Ä–µ—à–µ–Ω–∏—è–º–∏ EconomyAI/LegalAI
[ ] –ö–∞—Ä—Ç–∞ —Å –º–∞—Ä—à—Ä—É—Ç–∞–º–∏/—à—Ç–æ—Ä–º–∞–º–∏/–∫–∞—Ä–∞–≤–∞–Ω–∞–º–∏, –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—ã–º–∏ –æ–±—ä–µ–∫—Ç–∞–º–∏

## 11) –ù–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç—å, —Ç–µ—Å—Ç—ã, –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å
[x] OpenTelemetry/Prometheus: durata —Ñ–∞–∑ —Ç–∏–∫–∞, —á–∞—Å—Ç–æ—Ç–∞/–æ—à–∏–±–∫–∏ LLM (–≥–∏—Å—Ç–æ–≥—Ä–∞–º–º—ã `imperium_tick_duration_ms`/`imperium_llm_duration_ms`, —Å—á—ë—Ç—á–∏–∫–∏ `llm.*`, REST `/api/metrics/ticks`, Activity `Imperium.TickWorker`)
[ ] –Æ–Ω–∏—Ç-—Ç–µ—Å—Ç—ã: NpcAgent, Prompts, RoleLlmRouter, KnowledgeDiffusion
[ ] –ù–∞–≥—Ä—É–∑–æ—á–Ω—ã–π —Ä–µ–∂–∏–º ‚Äú1000 —Ç–∏–∫–æ–≤ –±–µ–∑ –æ—à–∏–±–æ–∫‚Äù + –æ—Ç—á—ë—Ç
[ ] –§–µ–π–∫–æ–≤—ã–µ LLM-–∫–ª–∏–µ–Ω—Ç—ã –∏ –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–∏–¥—ã –¥–ª—è –æ—Ñ–ª–∞–π–Ω–∞
  [x] –Æ–Ω–∏—Ç/–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã: –¥–æ–±–∞–≤–ª–µ–Ω—ã —Ç–µ—Å—Ç—ã –Ω–∞ —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –∞–≥–µ–Ω—Ç–æ–≤ –ø—Ä–∏ –ø–∞–¥–µ–Ω–∏–∏ LLM (in-memory SQLite shared)
  [x] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ç–µ—Å—Ç: `CivilizationGenesis_IsIdempotent_OnSecondRun` ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏
  [x] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ç–µ—Å—Ç: `CivilizationGenesis_CreatesValidTradeRoutesAndReserves` ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–∞–ø–∞—Å–æ–≤/—Ü–µ–Ω/—Å–ª—É—Ö–æ–≤/—Å–¥–µ–ª–æ–∫

## 12) MVP-–≤–∞–ª–∏–¥–∞—Ç–æ—Ä
[ ] 1000 —Ç–∏–∫–æ–≤ –±–µ–∑ –æ—à–∏–±–æ–∫
[ ] –í –ë–î: —Å–º–µ–Ω—ã –¥–Ω—è/–≥–æ–¥–∞, —Å–µ–∑–æ–Ω—ã, –ø–æ–≥–æ–¥–∞, –±–∞–∑–æ–≤–∞—è —ç–∫–æ–Ω–æ–º–∏–∫–∞
[ ] –°–æ–±—ã—Ç–∏—è: discovery, festival, rumor, battle, legal_verdict, season_change, day_change, year_change
[ ] –ù–∞–≤—ã–∫–∏ NPC –º–µ–Ω—è—é—Ç—Å—è –æ—Ç –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏/–æ–±—É—á–µ–Ω–∏—è
[ ] –ì–æ–¥–æ–≤–æ–π summary (HistoryAI) –≤ WorldChronicle
[ ] –ò–≥—Ä–æ–∫ —É–º–∏—Ä–∞–µ—Ç ‚Üí –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ –Ω–∞—Å–ª–µ–¥–Ω–∏–∫–∞ (Genealogy/Inheritance)

## 13) –ù–µ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
[ ] –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∏ PR ‚Äî —Ç–æ–ª—å–∫–æ –Ω–∞ —Ä—É—Å—Å–∫–æ–º
[ ] LLM ‚Äî —Å—Ç—Ä–æ–≥–æ –∫–æ–º–ø–∞–∫—Ç–Ω—ã–π JSON
[ ] –ß–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞: Domain —Å–æ–¥–µ—Ä–∂–∏—Ç –ø—Ä–∞–≤–∏–ª–∞ –º–∏—Ä–∞, API ‚Äî –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è
[x] –í—Å–µ –∞–≥–µ–Ω—Ç—ã –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç `GameEvent` –∏ –Ω–µ –±–ª–æ–∫–∏—Ä—É—é—Ç —Ç–∏–∫ (—á–µ—Ä–µ–∑ EventDispatcher)

## –°–¥–µ–ª–∞–Ω–æ (–∫—Ä–∞—Ç–∫–æ)
- **Backend**
  - `RoleLlmRouter`: —Ä–æ—É—Ç–∏–Ω–≥ role ‚Üí model, –ø–æ–¥–¥–µ—Ä–∂–∫–∞ Ollama/OpenAI (fallback + –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ).
  - `RoleLlmRouter`: –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è per-request traceId –∏ –ª–æ–≥-—Å–∫–æ—É–ø; traceId –≤–∏–¥–µ–Ω –≤ –ª–æ–≥–∞—Ö EF Core / HTTP / –∞–≥–µ–Ω—Ç–æ–≤.
  - `NpcAgent`: —Å—Ç—Ä–æ–≥–∏–µ JSON-–æ—Ç–≤–µ—Ç—ã, —É–º–µ–Ω—å—à–µ–Ω–æ —á–∏—Å–ª–æ reask, —Ç–∞–π–º–∞—É—Ç—ã –∏ –ø–∞—Ä—Å–∏–Ω–≥ `characterId/essence/skills/history`.
  - `NpcAgent`: –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –æ—à–∏–±–∫–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏, LLM-–≤—ã–∑–æ–≤—ã –æ–±—ë—Ä–Ω—É—Ç—ã per-agent —Ç–∞–π–º–∞—É—Ç–æ–º; –¥–ª–∏–Ω–Ω—ã–µ EF-–≤—ã–∑–æ–≤—ã –±–æ–ª—å—à–µ –Ω–µ –ø–æ–ª—É—á–∞—é—Ç per-agent CancellationToken.
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –º–∏–≥—Ä–∞—Ü–∏—è –ë–î –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ (`db.Database.Migrate()`), —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ `Character`.
  - –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–ª—è –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π, —Å–æ–±—ã—Ç–∏–π, –¥–µ–≤-–æ–ø–µ—Ä–∞—Ü–∏–π; SSE `/api/events/stream`.
  - `Relationship` + `RelationshipAI`: —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–≤—è–∑–µ–π, —Å–æ–±—ã—Ç–∏—è `marriage`, `betrayal`, `child_birth`.
  - `EventDispatcherService`: —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–∞–Ω–∞–ª –¥–ª—è –∑–∞–ø–∏—Å–∏/—Å—Ç—Ä–∏–º–∞ `GameEvent` (—Ñ–∏–∫—Å –¥–≤–æ–π–Ω–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏).
  - LLM fallback: –ø—Ä–∏ —Å–±–æ—è—Ö Ollama/OpenAI `RoleLlmRouter` –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ª–æ–≥–∏—Ä—É–µ—Ç –æ—à–∏–±–∫—É –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `MockLlmClient` (—Ç–µ—Å—Ç—ã –∏ runtime –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—é—Ç).
  - –¢–µ—Å—Ç—ã: –¥–æ–±–∞–≤–ª–µ–Ω –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ç–µ—Å—Ç, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–π in-memory SQLite (shared connection) –¥–ª—è –∏–º–∏—Ç–∞—Ü–∏–∏ EF Core –ø–æ–≤–µ–¥–µ–Ω–∏—è; dotnet test –ø—Ä–æ—Ö–æ–¥–∏—Ç (2/2 –≤ —Ç–µ–∫—É—â–µ–π —Å–µ—Å—Å–∏–∏).
  - `MetricsService`: –∫–æ–ª—å—Ü–µ–≤–æ–π –±—É—Ñ–µ—Ä –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π —Ç–∏–∫–æ–≤ –∏ LLM, REST-—Å—Ä–µ–∑ `/api/metrics/ticks`, –≥–∏—Å—Ç–æ–≥—Ä–∞–º–º–∞ `imperium_llm_duration_ms`, —Å—á—ë—Ç—á–∏–∫–∏ `llm.requests/success/errors/canceled`.
  - `LlmMetricsDecorator` + `TickWorker`: OpenTelemetry Activity (`Imperium.Llm`, `Imperium.TickWorker`) —Å –º–µ—Ç–∫–∞–º–∏ —É—Å–ø–µ—Ö–æ–≤/–æ—à–∏–±–æ–∫ –∞–≥–µ–Ω—Ç–æ–≤ –∏ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—è–º–∏.
  - `EconomyStateService`: —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π —Å–∏–¥-—Å–ø–∏—Å–æ–∫ (~100 —Ç–æ–≤–∞—Ä–æ–≤) –ø–æ–¥—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç—Å—è –∏–∑ `appsettings.json` (`Economy.Items`), –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è.
  - `EconomyItemDefinition`: –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª—è `weightPerUnit`, `perishableDays`, `stackSize`, `category` –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ API.
  - Frontend: –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø–∞–Ω–µ–ª—å `ItemDefsPanel` –≤ `EconomyPanel` –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π —Ç–æ–≤–∞—Ä–æ–≤.

  - `TimeAgent`/WorldTime: –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤—ã—á–∏—Å–ª—è–µ–º—ã–µ –ø–æ–ª—è `Month` –∏ `DayOfMonth`; `time_tick` —Ç–µ–ø–µ—Ä—å —Å–æ–¥–µ—Ä–∂–∏—Ç `month` –∏ `dayOfMonth`, –¥–æ–±–∞–≤–ª–µ–Ω–æ —Å–æ–±—ã—Ç–∏–µ `month_change`.
  - Dev endpoints: `/api/dev/tick-now` –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä `advanceTime` –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `worldTime`; –¥–æ–±–∞–≤–ª–µ–Ω `POST /api/dev/tick-time` –¥–ª—è –ø—Ä–æ–≥–æ–Ω–∫–∏ —Ç–æ–ª—å–∫–æ TimeAI.
  - Frontend: `WorldSidebar` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –º–µ—Å—è—Ü/–¥–µ–Ω—å –º–µ—Å—è—Ü–∞; –∫–∞—Ä—Ç–æ—á–∫–∏ —Å–≤–æ–¥–∫–∏ –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—ã –∏ —Ñ–∏–ª—å—Ç—Ä—É—é—Ç `EventsList`; –¥–æ–±–∞–≤–ª–µ–Ω toast –ø—Ä–∏ "–¢–∞–∫—Ç + –≤—Ä–µ–º—è".
  - UI: –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –æ—à–∏–±–∫–∏ TypeScript –≤ `NpcCanvas`, `NpcMap`, `CharacterFocus`.
  - –°–±–æ—Ä–∫–∞ –∏ —Ç–µ—Å—Ç—ã: `dotnet test` –∏ —Å–±–æ—Ä–∫–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ (`npm build`) –ø—Ä–æ—Ö–æ–¥—è—Ç –ª–æ–∫–∞–ª—å–Ω–æ.
  - `EmpireGenesisService`: –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–∞–Ω–Ω–∏—Ö –∏–º–ø–µ—Ä–∏–π –∏–∑ `city_state` —Å –∞—Ä–º–∏—è–º–∏, –Ω–∞–ª–æ–≥–æ–≤–æ–π –ø–æ–ª–∏—Ç–∏–∫–æ–π –∏ LLM-driven founding myths.
  - `Faction` —Ä–∞—Å—à–∏—Ä–µ–Ω–∞: `ParentFactionId`, `TaxPolicyJson`, `LocationId`.
  - –ù–æ–≤–∞—è –º–æ–¥–µ–ª—å `TradeRoute` –∏ –º–∏–≥—Ä–∞—Ü–∏—è `20251021120000_AddTradeRoutesAndFactionFields` –¥–æ–±–∞–≤–ª–µ–Ω—ã –∫ –ø—Ä–æ–µ–∫—Ç—É –∏ –≤ `migrations.sql`.
   - `EmpireGenesisService`: –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–∞–Ω–Ω–∏—Ö –∏–º–ø–µ—Ä–∏–π –∏–∑ `city_state` —Å –∞—Ä–º–∏—è–º–∏, –Ω–∞–ª–æ–≥–æ–≤–æ–π –ø–æ–ª–∏—Ç–∏–∫–æ–π –∏ LLM-driven founding myths; –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –∏ –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã.
   - –í –ø—Ä–æ—Ü–µ—Å—Å–µ: —á–∏—Å—Ç–∫–∞ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –º–∏–≥—Ä–∞—Ü–∏–π (—É–±—Ä–∞–Ω–æ `TempSync`) –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∑–∞–ø–∏—Å–µ–π –≤ `__EFMigrationsHistory`.

- **Frontend**
  - `NpcProfiles.tsx`: —Å–ø–∏—Å–æ–∫, –ø—Ä–æ—Ñ–∏–ª—å, live‚Äëtimeline (SSE + –∞–≤—Ç–æ-—Ä–µ–∫–æ–Ω–Ω–µ–∫—Ç).
  - –û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π –¥–∞—à–±–æ—Ä–¥: –±–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å —Å—Ç–∞—Ç—É—Å–∞ –º–∏—Ä–∞, –≤–∫–ª–∞–¥–∫–∏, EventsList —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏ –∏ –ø–æ–∏—Å–∫–æ–º, –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–≥–æ–¥—ã/—ç–∫–æ–Ω–æ–º–∏–∫–∏.
  - `WorldSidebar`: —Ä–∞–∑–¥–µ–ª ¬´–ù–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç—å¬ª —Å–æ —Å–ø–∞—Ä–∫–ª–∞–π–Ω–æ–º –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Ç–∏–∫–æ–≤ –∏ —Å–≤–æ–¥–∫–æ–π LLM-–≤—ã–∑–æ–≤–æ–≤ (–¥–∞–Ω–Ω—ã–µ –∏–∑ `/api/metrics` –∏ `/api/metrics/ticks`).
  - `eventsClient`: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π SignalR reconnect + –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –º–æ–∫-—Å—Ç—Ä–∏–º–∞ –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è; EconomyPanel –∂–∏–≤—ë—Ç –Ω–∞ –ø–æ—Ç–æ–∫–æ–≤—ã—Ö –∞–ø–¥–µ–π—Ç–∞—Ö –±–µ–∑ —Ä—É—á–Ω–æ–≥–æ refresh.

- **Dev / Tooling**
  - PowerShell-—Å–∫—Ä–∏–ø—Ç—ã `smoke-test.ps1`, `check-apis.ps1`.
  - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –∑–∞–ø—É—Å–∫—É API –≤ foreground/background, helper —à–∞–≥–∏.

## –ü—Ä–∏–º–µ—á–∞–Ω–∏—è / —Ä–∏—Å–∫–∏
- LLM –∏–Ω–æ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ª–∞—Ç–∏–Ω–∏—Ü—É ‚Äî `NpcAgent` —Å–º—è–≥—á—ë–Ω, –Ω–æ –Ω—É–∂–Ω–æ –¥–∞–ª—å–Ω–µ–π—à–µ–µ —É–ª—É—á—à–µ–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–æ–≤.
- –í—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–µ –º–æ–¥–µ–ª–∏ (KnowledgeWave, DeepHistory, TalentAI –∏ –ø—Ä.) –µ—â—ë –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã ‚Äî –æ–∂–∏–¥–∞—é—Ç —Å–ª–µ–¥—É—é—â–µ–≥–æ —ç—Ç–∞–ø–∞.
  - –í logging –≤–∫–ª—é—á–µ–Ω—ã scopes (IncludeScopes=true) –≤ `Program.cs`, –ø–æ—ç—Ç–æ–º—É traceId –∏–∑ `RoleLlmRouter` –≤–∏–¥–µ–Ω —Ä—è–¥–æ–º —Å EF Core –∏ HTTP –ª–æ–≥–∞–º–∏; —ç—Ç–æ —É–ø—Ä–æ—â–∞–µ—Ç –∫–æ—Ä—Ä–µ–ª—è—Ü–∏—é.
  - –ü—Ä–∏ –º–µ–¥–ª–µ–Ω–Ω–æ–π/–Ω–µ—É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç–µ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ Ollama –≤–æ–∑–º–æ–∂–Ω—ã —á–∞—Å—Ç—ã–µ fallback-—ã ‚Äî —ç—Ç–æ –æ–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –ø—Ä–∏ –≤—ã–±—Ä–∞–Ω–Ω–æ–º —Ç–∞–π–º–∞—É—Ç–µ; –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –º–æ–∂–Ω–æ —É–≤–µ–ª–∏—á–∏—Ç—å —Ç–∞–π–º–∞—É—Ç –∏–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å retry-–ø–æ–ª–∏—Ç–∏–∫—É.

## –ß—Ç–æ –¥–∞–ª—å—à–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É—é
1. –ü—Ä–æ–≥–Ω–∞—Ç—å `POST /api/dev/seed-characters`, `POST /api/dev/tick-now`, –∑–∞—Ç–µ–º `GET /api/events?type=npc_reply&count=50` ‚Äî —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ RelationshipAI –∏ NpcAI –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç —Å–æ–±—ã—Ç–∏—è.
2. –†–∞—Å—à–∏—Ä–∏—Ç—å unit/integration —Ç–µ—Å—Ç—ã (Prompts.cs, `RoleLlmRouter`, `NpcAgent`) –∏ –¥–æ–±–∞–≤–∏—Ç—å —Ä–µ–ø–æ—Ä—Ç—ã –ø–æ–∫—Ä—ã—Ç–∏—è.
3. –î–æ–±–∞–≤–∏—Ç—å –∑–∞–ø–∏—Å—å `meta.traceId` –≤ `GameEvent.PayloadJson` (–æ—á–µ–Ω—å –º–∞–ª–µ–Ω—å–∫–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ) —á—Ç–æ–±—ã –æ–±–ª–µ–≥—á–∏—Ç—å –ø–æ–∏—Å–∫ —Å–æ–±—ã—Ç–∏–π, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º LLM-–≤—ã–∑–æ–≤–æ–º; –º–æ–≥—É —Å–¥–µ–ª–∞—Ç—å –ø–∞—Ç—á –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç/—Å–µ—Ä–≤–µ—Ä —á—Ç–æ–±—ã –ø–æ–∫–∞–∑–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç.
4. –†–∞—Å—à–∏—Ä–∏—Ç—å —Å–∏–¥ (Sicilia Seed) –∏ –¥–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–≤—ã–µ –ø–∞–Ω–µ–ª–∏ —ç–∫–æ–Ω–æ–º–∏–∫–∏/–º–µ—Ç—Ä–∏–∫ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ.

---

## 14) –≠–∫–æ–Ω–æ–º–∏–∫–∞: —Ç–æ—Ä–≥–æ–≤–ª—è, –∑–∞–ø–∞—Å—ã, —Å–¥–µ–ª–∫–∏ ‚Äî –∏—Ç–µ—Ä–∞—Ç–∏–≤–Ω—ã–π –ø–ª–∞–Ω

–¶–µ–ª—å: –ø–µ—Ä–µ–π—Ç–∏ –æ—Ç ¬´—Å–Ω–∏–º–∫–∞ —Ü–µ–Ω¬ª –∫ –∂–∏–≤–æ–º—É —Ä—ã–Ω–∫—É —Å –∑–∞–ø–∞—Å–∞–º–∏, –∑–∞—è–≤–∫–∞–º–∏ –∏ —Å–¥–µ–ª–∫–∞–º–∏. –†–µ–∞–ª–∏–∑—É–µ–º –ø–æ —ç—Ç–∞–ø–∞–º, —á—Ç–æ–±—ã –±—ã—Å—Ç—Ä–æ —É–≤–∏–¥–µ—Ç—å –¥–≤–∏–∂–µ–Ω–∏–µ.

[x] E1. Fast‚Äëtrack —Ä—ã–Ω–æ–∫ –Ω–∞ —Å–æ–±—ã—Ç–∏—è—Ö (–±–µ–∑ –º–∏–≥—Ä–∞—Ü–∏–π)
  [x] GameEvent-—à–∞–±–ª–æ–Ω—ã (`order_placed`, `trade_executed`, `inventory_changed`) –∏ dev-—ç–Ω–¥–ø–æ–∏–Ω—Ç `POST /api/dev/place-order-event`
  [x] –£—á—ë—Ç –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π –≤–∞–ª—é—Ç–Ω–æ–π –µ–¥–∏–Ω–∏—Ü—ã –∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –¥–æ—Ö–æ–¥–∞ –≤ EconomyAgent/Ownership
  [x] –ü—Ä–æ—Å—Ç–æ–π –º–∞—Ç—á–∏–Ω–≥ buy/sell –≤ EconomyAgent —Å —Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –æ—Å—Ç–∞—Ç–∫–æ–≤ –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π —Å–æ–±—ã—Ç–∏–π
  [x] Read-only —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã `/api/economy/orders`, `/api/economy/trades` + —Å–æ–±—ã—Ç–∏—è –≤ –æ—Å–Ω–æ–≤–Ω–æ–º `POST /api/economy/orders`
  [x] UI-–±–ª–æ–∫ EconomyPanel —Å–æ —Å—Ç–∞–∫–∞–Ω–æ–º –∏ –ª–µ–Ω—Ç–æ–π —Å–¥–µ–ª–æ–∫ (Imperium Web)
  [x] –°—Ç–∞–±–∏–ª—å–Ω—ã–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ç–µ—Å—Ç –º–∞—Ç—á–∏–Ω–≥–∞ (EconomyAgent, SQLite) –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–±—ã—Ç–∏–π
[x] E2. –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏ –∏ –º–∏–≥—Ä–∞—Ü–∏–∏
  - –ú–æ–¥–µ–ª–∏: `Inventory`, `MarketOrder` (buy/sell, price, qty, remaining, status), `Trade`
  - –ú–∏–≥—Ä–∞—Ü–∏–∏ + —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏, —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω—ã–π –º–∞—Ç—á–∏–Ω–≥
  - –ü–µ—Ä–µ–Ω–æ—Å –ª–æ–≥–∏–∫–∏ –∏–∑ E1 (—Å–æ–±—ã—Ç–∏—è –æ—Å—Ç–∞—é—Ç—Å—è –∫–∞–∫ –∞—É–¥–∏—Ç)
[x] E3. –ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ –∏ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ
  - `ProductionAgent`: –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤ –ø–æ –ª–æ–∫–∞—Ü–∏—è–º/–¥–æ–º–æ—Ö–æ–∑—è–π—Å—Ç–≤–∞–º (—É—Ä–æ–∂–∞–π–Ω–æ—Å—Ç—å –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Å–µ–∑–æ–Ω–∞/–ø–æ–≥–æ–¥—ã)
  - `ConsumptionAgent`: –±–∞–∑–æ–≤–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –¥–æ–º–æ—Ö–æ–∑—è–π—Å—Ç–≤; –¥–µ—Ñ–∏—Ü–∏—Ç ‚Üí —Å—Ç–∞—Ç—É—Å—ã/—Å–æ–±—ã—Ç–∏—è, —Ä–æ—Å—Ç —Å–ø—Ä–æ—Å–∞
[x] E4. –õ–æ–≥–∏—Å—Ç–∏–∫–∞
  - `LogisticsAgent`: –ø–µ—Ä–µ–≤–æ–∑–∫–∏ –º–µ–∂–¥—É –ª–æ–∫–∞—Ü–∏—è–º–∏ (—Å—Ç–æ–∏–º–æ—Å—Ç—å/–≤—Ä–µ–º—è, –±–∞–∑–æ–≤—ã–µ —Ä–∏—Å–∫–∏), –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ Inventory
  - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ `transport_job` ‚Üí –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ ‚Üí `transport_completed`
[x] E5. –¶–µ–Ω–∞ –∫–∞–∫ –ø—Ä–æ–∏–∑–≤–æ–¥–Ω–∞—è —Ä—ã–Ω–∫–∞
  - ¬´–°–Ω–∏–º–æ–∫ —Ü–µ–Ω¬ª = —Å—Ä–µ–¥–Ω–µ–≤–∑–≤–µ—à–µ–Ω–Ω–∞—è —Ü–µ–Ω–∞ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Å–¥–µ–ª–æ–∫ + mid(best bid/ask) –ø–æ –ª–æ–∫–∞—Ü–∏—è–º
[x] E6. –ú–µ—Ç—Ä–∏–∫–∏/–Ω–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç—å

### –ó–∞–¥–∞—á–∏ –ø–æ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º —Ç–æ–≤–∞—Ä–∞–º (Item Definitions)
- [x] –ú–æ–¥–µ–ª—å `EconomyItemDefinition` (Name, BasePrice, Unit, ConsumptionPerTick, Tags)
- [x] `EconomyStateService` ‚Äî —Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö —Ç–æ–≤–∞—Ä–æ–≤ –∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π, —Å–æ–∑–¥–∞–Ω–∏–µ –¥–µ—Ñ–æ–ª—Ç–æ–≤ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏
- [x] API `/api/economy/items` –∏ `/api/economy/item-defs` (GET/POST)
- [x] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è: `EconomyAgent` –∏ `ConsumptionAgent` –∏—Å–ø–æ–ª—å–∑—É—é—Ç `BasePrice` –∏ `ConsumptionPerTick`
- [x] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: README + docs/Chapters/08_Economy_Items_and_Definitions.md
- [x] Seed-—Å–ø–∏—Å–æ–∫ ~100 —Ç–æ–≤–∞—Ä–æ–≤ –≤ `Economy.Items` (`appsettings.json`) —Å –∞–≤—Ç–æ-–∑–∞–≥—Ä—É–∑–∫–æ–π –≤ `EconomyStateService`
- [x] –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π: `weight`, `perishableDays`, `stackSize`, `category`
- [ ] UI: –ø–∞–Ω–µ–ª—å –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π (React)
- [ ] –¢–µ—Å—Ç—ã: unit-—Ç–µ—Å—Ç—ã –¥–ª—è `EconomyStateService` –∏ API-—ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ `item-defs`
- [ ] –ú–µ—Ç—Ä–∏–∫–∏: —ç–∫—Å–ø–æ—Ä—Ç –ø–æ —Ç–æ–≤–∞—Ä–∞–º (—Ç–æ—Ä–≥–∏, –∑–∞–ø–∞—Å—ã, –æ–±–æ—Ä–æ—Ç) –≤ `/api/metrics`

  - –°—á—ë—Ç—á–∏–∫–∏ `economy.orders`, `economy.trades`, –æ–±–æ—Ä–æ—Ç, latency –º–∞—Ç—á–∏–Ω–≥–∞; —ç–∫—Å–ø–æ—Ä—Ç –≤ `/api/metrics`

### –í—ã–ø–æ–ª–Ω–µ–Ω–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –≤ E2‚ÄìE6
[x] –†–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ä–µ–¥—Å—Ç–≤/—Ç–æ–≤–∞—Ä–∞ –∏ –≤–æ–∑–≤—Ä–∞—Ç—ã –ø—Ä–∏ –∏—Å—Ç–µ—á–µ–Ω–∏–∏/–æ—Ç–º–µ–Ω–µ (DELETE /api/economy/orders/{id})
[x] –ö–∞–∑–Ω–∞ –ª–æ–∫–∞—Ü–∏–π –∏ –ø–æ—à–ª–∏–Ω—ã (1%) –Ω–∞ —Å–¥–µ–ª–∫–∏
[x] Household‚Äë—É—á—ë—Ç –ø—Ä–∏ —Ä–∞–∑–º–µ—â–µ–Ω–∏–∏ –æ—Ä–¥–µ—Ä–æ–≤ (OwnerType=household)
[x] UI: –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å –ø–µ—Ä—Å–æ–Ω–∞–∂–∞, –∞–≥—Ä–µ–≥–∞—Ç—ã –∑–∞–ø–∞—Å–æ–≤ –ø–æ –ª–æ–∫–∞—Ü–∏—è–º (EconomyPanel)
[x] SQLite fix: –ø–µ—Ä–µ–Ω–æ—Å —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ decimal –Ω–∞ –∫–ª–∏–µ–Ω—Ç –≤ `/api/economy/inventory`

## 16) Character Focus (–Ω–æ–≤—ã–π —Ä–∞–∑–¥–µ–ª UI)
[x] API: `/api/characters/{id}/relationships`, `/api/characters/{id}/communications`
[x] UI: –≤–∫–ª–∞–¥–∫–∞ ¬´–§–æ–∫—É—Å¬ª ‚Äî –≥–µ–Ω–µ–∞–ª–æ–≥–∏—è (2‚Äì3 —É—Ä–æ–≤–Ω—è), –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏, –º–∏–Ω–∏‚Äë—Å–ø–∏—Å–æ–∫ —Å–≤—è–∑–µ–π (—Ç–æ–ø by |trust|+|love|+|hostility|)

## 17) –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏
[x] Household UI: –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å —Å–µ–º—å–∏, —Å–æ–∑–¥–∞–Ω–∏–µ/–æ—Ç–º–µ–Ω–∞ –æ—Ä–¥–µ—Ä–æ–≤ –æ—Ç household (–ø–∞–Ω–µ–ª—å –≤ Imperium.Web + API-—Ö–µ–ª–ø–µ—Ä—ã)
[x] Civilization genesis: seed –≤–Ω–µ–¥—Ä—ë–Ω, API `GET /api/factions` –∏ `GET /api/rumors` –¥–æ–±–∞–≤–ª–µ–Ω—ã
[x] Character Focus+: –º–∏–Ω–∏‚Äë–≥—Ä–∞—Ñ —Å–≤—è–∑–µ–π –∏ —Ñ–∏–ª—å—Ç—Ä –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–π –ø–æ —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫—É (–Ω–æ–≤—ã–π React-–ø–∞–Ω–µ–ª—å + –≥—Ä–∞—Ñ)
[x] –ó–∞–∫–∞–∑/–æ—Ç–º–µ–Ω–∞ –æ—Ä–¥–µ—Ä–æ–≤ —Å —Ñ—Ä–æ–Ω—Ç–∞ (POST/DELETE), –ø–æ–∫–∞–∑ TTL/–ø–æ—à–ª–∏–Ω—ã (EconomyPanel: —Ñ–æ—Ä–º–∞, TTL, –æ—Ç–º–µ–Ω–∞, –∫–æ–º–∏—Å—Å–∏—è)
[x] Treasury/Logistics: –æ—á–µ—Ä–µ–¥—å –∏ —Ä–µ–∑–µ—Ä–≤ –±—é–¥–∂–µ—Ç–∞, –∫–æ–Ω—Ñ–∏–≥ –º–∞—Ç—Ä–∏—Ü—ã —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–π (LogisticsQueueService, LogisticsOptions, API `/api/logistics/jobs`, —Å–æ–±—ã—Ç–∏—è)
[x] –¢–µ—Å—Ç—ã: —Ä–µ–∑–µ—Ä–≤—ã –∏ –≤–æ–∑–≤—Ä–∞—Ç—ã, treasury/fees, logistics costs; Focus endpoints (EconomyAgent expiration, —Ç–æ—Ä–≥–æ–≤—ã–µ —Å–±–æ—Ä—ã, LogisticsAgent, Character Focus)

## 15) –ù–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ: –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ü–∏–∫–ª–∞
[x] –ë–∞–∑–æ–≤–∞—è `InheritanceRecord` –∏ dev‚Äëresolve
[x] –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω—ã–π –ø–µ—Ä–µ–Ω–æ—Å –±–æ–≥–∞—Ç—Å—Ç–≤–∞ –∏ –≤–ª–∞–¥–µ–Ω–∏–π (—Å–µ—Ä–≤–∏—Å `InheritanceService`):
  - –ü–µ—Ä–µ–Ω–æ—Å `Ownership` –∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ `Household.Wealth` –º–µ–∂–¥—É –Ω–∞—Å–ª–µ–¥–Ω–∏–∫–∞–º–∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏;
    —Å–æ–±—ã—Ç–∏—è `inheritance_transfer` –∏ `inheritance_wealth_transfer` —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –∏ –ø—É–±–ª–∏–∫—É—é—Ç—Å—è —á–µ—Ä–µ–∑ `IEventDispatcher`.
[x] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å `OwnershipAgent`: –∞–≤—Ç–æ—Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π –ø—Ä–∏ `AcquisitionType == "inheritance"` (—Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ: OwnershipAgent —Ç–µ–ø–µ—Ä—å —Å–æ–∑–¥–∞—ë—Ç Ownership –ø—Ä–∏ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–∏)
[x] –¢–µ—Å—Ç—ã: –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –∫–µ–π—Å—ã –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –Ω–∞—Å–ª–µ–¥–Ω–∏–∫–æ–≤ –∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–æ–≤ (round-robin/equal_split, –º–Ω–æ–≥–æ–¥–æ–º–æ–≤—ã–µ —Ö–æ–∑—è–π—Å—Ç–≤–∞, —Å–æ–±—ã—Ç–∏—è –ø–æ –∫–∞–∂–¥–æ–º—É –∞–∫—Ç–∏–≤—É)

## 16) –ü–æ–ª –ø–µ—Ä—Å–æ–Ω–∞–∂–∞: –ø–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–æ–µ –≤–ª–∏—è–Ω–∏–µ
[x] –î–æ–±–∞–≤–ª–µ–Ω `Character.Gender` (API + —Å–∏–¥–µ—Ä + UI)
[x] –ú–∏–≥—Ä–∞—Ü–∏—è –ë–î (–≤—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥–∞–º–∏ EF)
[x] –£—Ç–æ—á–Ω–µ–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–æ–≤ NpcAI: —Å—Ç–∏–ª—å —Ä–µ—á–∏/—Ç–æ–Ω–æ–≤–æ–µ —Å–º–µ—â–µ–Ω–∏–µ
[x] RelationshipAI: –º—è–≥–∫–∏–µ –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã –¥–æ–≤–µ—Ä–∏—è/–ª—é–±–≤–∏ (–±–µ–∑ –∂—ë—Å—Ç–∫–∏—Ö –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π)
[x] –§–∏–ª—å—Ç—Ä –ø–æ –ø–æ–ª—É –≤ —Å–ø–∏—Å–∫–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π (UI)

---

**–†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –ø–ª–∞–Ω** ‚Äî –∞–∫–∫—É—Ä–∞—Ç–Ω–æ –≤–≤–æ–¥–∏–º –ø–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–æ–µ –≤–ª–∏—è–Ω–∏–µ –ø–æ–ª–∞ –±–µ–∑ –∂—ë—Å—Ç–∫–∏—Ö –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π, —Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º—ã–º–∏ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–∞–º–∏ –∏ –ø–æ–∫—Ä—ã—Ç–∏–µ–º —Ç–µ—Å—Ç–∞–º–∏.

### –®–∞–≥ A ‚Äî –ú–∏–≥—Ä–∞—Ü–∏—è –ë–î –∏ —Å–∏–¥–µ—Ä (–±–∞–∑–æ–≤–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞)
- –¶–µ–ª—å: –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å, —á—Ç–æ –∫–æ–ª–æ–Ω–∫–∞ `Gender` –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ –ë–î –∏ —á—Ç–æ —Å–∏–¥–µ—Ä—ã –ø—Ä–∏—Å–≤–∞–∏–≤–∞—é—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π.
- –î–µ–π—Å—Ç–≤–∏—è:
  - –°–æ–∑–¥–∞—Ç—å EF-–º–∏–≥—Ä–∞—Ü–∏—é (–µ—Å–ª–∏ –µ—â—ë –Ω–µ—Ç):
    - `dotnet ef migrations add AddCharacterGender --project src/Imperium.Infrastructure --startup-project src/Imperium.Api`
  - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø–æ–ø—Ä–∞–≤–∏—Ç—å `migrations.sql` –∏ Designer-—Ñ–∞–π–ª—ã –≤ `src/Imperium.Infrastructure/Migrations`.
  - –õ–æ–∫–∞–ª—å–Ω–æ –ø—Ä–∏–º–µ–Ω–∏—Ç—å: `dotnet ef database update --project src/Imperium.Infrastructure --startup-project src/Imperium.Api`.
  - –ó–∞–ø—É—Å—Ç–∏—Ç—å dev-scripts: POST `/api/dev/seed-characters` –∏ —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤ –æ—Ç–≤–µ—Ç–∞—Ö —É –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π –µ—Å—Ç—å `gender`.
- Acceptance criteria:
  - –§–∞–π–ª –º–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏.
  - `dotnet ef database update` –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫ –∏ –≤ —Ç–∞–±–ª–∏—Ü–µ `Characters` –µ—Å—Ç—å –∫–æ–ª–æ–Ω–∫–∞ `Gender`.
  - Dev-seed —Å–æ–∑–¥–∞—ë—Ç –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π —Å `gender`.
- –°—Ç–∞—Ç—É—Å: ‚úÖ –ö–æ–ª–æ–Ω–∫–∞ `Gender` –≤–Ω–µ—Å–µ–Ω–∞ –≤ `migrations.sql`, —Å–∏–¥–µ—Ä—ã –∏ dev-—ç–Ω–¥–ø–æ–∏–Ω—Ç—ã (`seed-characters`) –≤—ã—Å—Ç–∞–≤–ª—è—é—Ç `male|female`; –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ —á–µ—Ä–µ–∑ `dotnet test`.

### –®–∞–≥ B ‚Äî –ü—Ä–æ–º–ø—Ç—ã `NpcAI` —Å —É—á—ë—Ç–æ–º –ø–æ–ª–∞ (—Å—Ç–∏–ª–∏/—Ç–æ–Ω)
- –¶–µ–ª—å: LLM-—Ä–µ—Å–ø–æ–Ω—Å—ã –¥–æ–ª–∂–Ω—ã –∏–º–µ—Ç—å –ª—ë–≥–∫—É—é –≥–µ–Ω–¥–µ—Ä–Ω—É—é –æ–∫—Ä–∞—Å–∫—É (–æ–±—Ä–∞—â–µ–Ω–∏—è/—Ç–æ–Ω), –Ω–æ –æ—Å—Ç–∞–≤–∞—Ç—å—Å—è –Ω–µ–π—Ç—Ä–∞–ª—å–Ω—ã–º–∏ –ø–æ —Ñ–æ—Ä–º–∞—Ç—É JSON.
- –î–µ–π—Å—Ç–≤–∏—è:
  - –û–±–Ω–æ–≤–∏—Ç—å `Prompts.cs`/`NpcAgent.cs`: –≤–∫–ª—é—á–∞—Ç—å –ø–æ–ª–µ `gender` –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç –∏ –¥–æ–±–∞–≤–∏—Ç—å –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ (–ø—Ä–∏–º–µ—Ä: "–ï—Å–ª–∏ gender == 'female', –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–±—Ä–∞—â–µ–Ω–∏–µ/—Ç–æ–Ω X, –∏–Ω–∞—á–µ Y").
  - –î–æ–±–∞–≤–∏—Ç—å unit-—Ç–µ—Å—Ç—ã –Ω–∞ –ø–∞—Ä—Å–µ—Ä/–ø—Ä–æ–º–ø—Ç: –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ LLM-–º–æ–∫ –æ—Ç–≤–µ—á–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ (JSON) –∏ —Å–æ–¥–µ—Ä–∂–∏—Ç –æ–∂–∏–¥–∞–µ–º—ã–µ –º–∞—Ä–∫–µ—Ä—ã —Ç–æ–Ω–∞ (–∫–æ—Ä–æ—Ç–∫–∏–µ —Ç–µ—Å—Ç–æ–≤—ã–µ —Å—Ç—Ä–æ–∫–∏, –Ω–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –∫ —è–∑—ã–∫—É).
- Acceptance criteria:
  - –ü—Ä–æ–º–ø—Ç —É–ø–æ–º–∏–Ω–∞–µ—Ç `gender` –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π JSON-–æ—Ç–≤–µ—Ç –æ—Ç MockLlmClient.
  - –¢–µ—Å—Ç—ã –ø–æ–∫—Ä—ã–≤–∞—é—Ç 2‚Äì3 —Å—Ü–µ–Ω–∞—Ä–∏—è (male/female/empty).
- –°—Ç–∞—Ç—É—Å: ‚úÖ `NpcAI` –∏ `NpcUtils` –¥–æ–±–∞–≤–ª—è—é—Ç —Ç–æ–Ω–æ–≤—ã–µ —É–∫–∞–∑–∞–Ω–∏—è –ø–æ –ø–æ–ª—É; —é–Ω–∏—Ç-—Ç–µ—Å—Ç—ã `NpcPromptTests` –ø–æ–∫—Ä—ã–≤–∞—é—Ç –∂–µ–Ω—Å–∫–∏–π/–º—É–∂—Å–∫–æ–π/–Ω–µ–π—Ç—Ä–∞–ª—å–Ω—ã–π —Å–ª—É—á–∞–∏.

### –®–∞–≥ C ‚Äî RelationshipAI: –º—è–≥–∫–∏–µ –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã
- –¶–µ–ª—å: –≤–≤–µ—Å—Ç–∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—É—é –ø–æ–¥–¥–µ—Ä–∂–∫—É –Ω–µ–±–æ–ª—å—à–∏—Ö –∫–æ—Ä—Ä–µ–∫—Ü–∏–π `Trust`/`Love` –Ω–∞ –æ—Å–Ω–æ–≤–∞–Ω–∏–∏ –ø–æ–ª–∞ –±–µ–∑ –∂—ë—Å—Ç–∫–æ–≥–æ –∑–∞–ø—Ä–µ—Ç–∞ –∏–ª–∏ –¥–∏—Å–∫—Ä–∏–º–∏–Ω–∞—Ü–∏–∏.
- –î–µ–π—Å—Ç–≤–∏—è:
  - –î–æ–±–∞–≤–∏—Ç—å —Å–µ–∫—Ü–∏—é –∫–æ–Ω—Ñ–∏–≥–∞ –≤ `appsettings.json`:
    "RelationshipModifiers": { "GenderBias": { "male->female": 0.0, "female->male": 0.0, "same": 0.0 } }
  - –í `RelationshipAgent` –ø—Ä–∏–º–µ–Ω–∏—Ç—å –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã –ø—Ä–∏ —Ä–∞—Å—á—ë—Ç–µ moodSwing / trustDelta (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 0). –°–¥–µ–ª–∞—Ç—å –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã –∞–≥–Ω–æ—Å—Ç–∏—á–Ω—ã–º–∏ –∏ –º–∞–ª–æ–π –≤–µ–ª–∏—á–∏–Ω—ã (–º–∏–ª–ª–∏-–¥–æ–ª–∏).
  - –ù–∞–ø–∏—Å–∞—Ç—å unit-—Ç–µ—Å—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç, —á—Ç–æ –ø—Ä–∏ –Ω–µ–Ω—É–ª–µ–≤–æ–º –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–µ `Trust` –∏–∑–º–µ–Ω—è–µ—Ç—Å—è –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ.
- Acceptance criteria:
  - –ö–æ–Ω—Ñ–∏–≥ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç, –ø–æ–≤–µ–¥–µ–Ω–∏–µ –¥–µ—Ñ–æ–ª—Ç–Ω–æ –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è (–∑–Ω–∞—á–µ–Ω–∏—è 0).
  - Unit-—Ç–µ—Å—Ç—ã –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É—é—Ç –∫–æ–Ω—Ç—Ä–æ–ª—å–∏—Ä—É–µ–º—É—é —Ä–∞–∑–Ω–∏—Ü—É –ø—Ä–∏ –≤—ã—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–º –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–µ.
- –°—Ç–∞—Ç—É—Å: ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω `RelationshipModifiers.GenderBias` —Å –Ω–∞–∫–æ–ø–∏—Ç–µ–ª—å–Ω—ã–º –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ–º –≤ `RelationshipAI`; —Ç–µ—Å—Ç—ã `RelationshipModifierTests` –ø—Ä–æ–≤–µ—Ä—è—é—Ç —Ä–∞—Å—á—ë—Ç –∏ —Å—É–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ bias.

### –®–∞–≥ D ‚Äî API –∏ UI: —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –ø–æ–ª—É
- –¶–µ–ª—å: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å —Å–ø–∏—Å–∫–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π –ø–æ –ø–æ–ª—É –≤ UI, –∞ API –¥–æ–ª–∂–µ–Ω –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å query-–ø–∞—Ä–∞–º–µ—Ç—Ä.
- –î–µ–π—Å—Ç–≤–∏—è:
  - –í `Program.cs`/Characters endpoint –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É `?gender=male|female|any`. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≤ LINQ-–ø—Ä–æ–µ–∫—Ü–∏–∏.
  - –ù–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ (Imperium.React) –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö `CharacterList`/`CharacterFocus` –¥–æ–±–∞–≤–∏—Ç—å –≤—ã–ø–∞–¥–∞—é—â–∏–π —Ñ–∏–ª—å—Ç—Ä, –ø—Ä–∏–≤—è–∑–∞—Ç—å –∫ query-string –∏ –≤—ã–∑–≤–∞—Ç—å –Ω–æ–≤—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä API.
  - –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é UI –∏ –¥–æ–±–∞–≤–∏—Ç—å E2E/–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ç–µ—Å—Ç (unit-level ok).
- Acceptance criteria:
  - GET /api/characters?gender=female –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–æ–ª—å–∫–æ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π female.
  - UI –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Å–µ–ª–µ–∫—Ç–æ—Ä –ø–æ–ª–∞ –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç —Å–ø–∏—Å–æ–∫.
- –°—Ç–∞—Ç—É—Å: ‚úÖ –≠–Ω–¥–ø–æ–∏–Ω—Ç `/api/characters` –ø—Ä–∏–Ω–∏–º–∞–µ—Ç `gender=?`; —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ Imperium.Web –¥–æ–±–∞–≤–∏–ª —Å–µ–ª–µ–∫—Ç–æ—Ä –ø–æ–ª–∞ –∏ –∫–Ω–æ–ø–∫—É –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (CharacterPanel).

### –®–∞–≥ E ‚Äî –¢–µ—Å—Ç—ã (unit + –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è)
- –¶–µ–ª—å: –ø–æ–∫—Ä—ã—Ç—å –ø—Ä–æ–º–ø—Ç—ã, Relationship modifiers –∏ API-—Ñ–∏–ª—å—Ç—Ä —Ç–µ—Å—Ç–∞–º–∏ –∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –¥–æ–±–∞–≤–∏—Ç—å –ª—ë–≥–∫–∏–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π.
- –î–µ–π—Å—Ç–≤–∏—è:
  - Unit: NpcPromptTests, RelationshipModifierTests, CharactersFilterTests.
  - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ): seed-characters —Å –∏–∑–≤–µ—Å—Ç–Ω—ã–º–∏ –ø–æ–ª–∞–º–∏ ‚Üí tick ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—è–≤–ª–µ–Ω–∏–µ `npc_reply` —Å –æ–∂–∏–¥–∞–µ–º—ã–º–∏ –º–∞—Ä–∫–µ—Ä–∞–º–∏.
  - –ï—Å–ª–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ç–µ—Å—Ç —Ö—Ä—É–ø–∫–∏–π, –ø–æ–º–µ—Ç–∏—Ç—å –µ–≥–æ –∫–∞–∫ [Skip] –∏ –æ—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–µ–π—Å.
- Acceptance criteria:
  - Unit-—Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç –≤ CI.
  - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ç–µ—Å—Ç –ª–∏–±–æ —Å—Ç–∞–±–∏–ª—å–Ω—ã–π, –ª–∏–±–æ —è–≤–Ω–æ –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç—Å—è –≤ CI until fix.
- –°—Ç–∞—Ç—É—Å: ‚úÖ –ù–æ–≤—ã–µ unit-—Ç–µ—Å—Ç—ã: `NpcPromptTests`, `RelationshipModifierTests`, `CharactersFilterTests`; `dotnet test` –ø—Ä–æ—Ö–æ–¥–∏—Ç.

### –®–∞–≥ F ‚Äî –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ PR
- –¶–µ–ª—å: –æ–ø–∏—Å–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ README/Docs –∏ PR description (—Ä—É—Å—Å–∫–∏–π —è–∑—ã–∫). –ü—Ä–∏–ª–æ–∂–∏—Ç—å –ø—Ä–∏–º–µ—Ä—ã –∫–æ–º–∞–Ω–¥ EF, –ø—Ä–∏–º–µ—Ä—ã –ø—Ä–æ–º–ø—Ç–æ–≤ –∏ —Ç–µ—Å—Ç–æ–≤—ã–µ –∫–µ–π—Å—ã.
- –î–µ–π—Å—Ç–≤–∏—è:
  - –û–±–Ω–æ–≤–∏—Ç—å `.github/emperium-task-instuctions.md` (—ç—Ç–æ—Ç —Ñ–∞–π–ª) ‚Äî –æ—Ç–º–µ—á–µ–Ω–æ –Ω–∏–∂–µ.
  - –í PR –≤–∫–ª—é—á–∏—Ç—å: –æ–ø–∏—Å–∞–Ω–∏–µ, —Å–ø–∏—Å–æ–∫ –∏–∑–º–µ–Ω–µ–Ω–∏–π, –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –º–∏–≥—Ä–∞—Ü–∏–π –∏ —Ç–µ—Å—Ç–æ–≤.
- –°—Ç–∞—Ç—É—Å: ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –≤ `.github/emperium-task-instuctions.md`, `docs/README.md`, `docs/Chapters/03_*/04_*`; —Å–º. —Ä–∞–∑–¥–µ–ª—ã –ø—Ä–æ –≥–µ–Ω–¥–µ—Ä.

–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–∏–º–µ—á–∞–Ω–∏—è
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å: –Ω–µ –≤–≤–æ–¥–∏—Ç—å –∂—ë—Å—Ç–∫–∏–µ –¥–∏—Å–∫—Ä–∏–º–∏–Ω–∞—Ü–∏–æ–Ω–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ ‚Äî —Ç–æ–ª—å–∫–æ –º—è–≥–∫–∏–µ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã –∏ –∫–æ–Ω—Ñ–∏–≥ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é = 0.
- –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å: `Gender` nullable; —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∏ –±–µ–∑ –ø–æ–ª—è –æ—Å—Ç–∞—é—Ç—Å—è –≤–∞–ª–∏–¥–Ω—ã.
- –í–µ—Ä—Å–∏–∏ –∏ –∫–æ–º–∞–Ω–¥—ã (–ø–æ–ª–µ–∑–Ω–æ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞):
  - –°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é:
    ```pwsh
    dotnet ef migrations add AddCharacterGender --project src/Imperium.Infrastructure --startup-project src/Imperium.Api
    ```
  - –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –ª–æ–∫–∞–ª—å–Ω–æ:
    ```pwsh
    dotnet ef database update --project src/Imperium.Infrastructure --startup-project src/Imperium.Api
    ```
  - –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã:
    ```pwsh
    dotnet test "src/Imperium.sln" --verbosity minimal
    ```

---

–î–æ–±–∞–≤–ª—è–π—Ç–µ —Å—é–¥–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –ø–æ —Ç–æ–º—É, –∫–∞–∫–∏–µ –ø–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏–µ —ç—Ñ—Ñ–µ–∫—Ç—ã –≤—ã —Ö–æ—Ç–∏—Ç–µ (–Ω–∞–ø—Ä., "–∂–µ–Ω—â–∏–Ω—ã –∏–º–µ—é—Ç +5% —à–∞–Ω—Å —É—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å –≤ —Ä–µ–º–µ—Å–ª–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á–∞—Ö", –∏–ª–∏ "–º—É–∂—á–∏–Ω—ã –±–æ–ª–µ–µ —Å–∫–ª–æ–Ω–Ω—ã –∫ –∞–≥—Ä–µ—Å—Å–∏–∏ –≤ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–µ"), –∏ —è —Ä–∞—Å–ø–∏—à—É —à–∞–≥–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–æ–¥ –≤–∞—à—É —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—é.

## 17) –£–ª—É—á—à–µ–Ω–∏—è UI/UX
[x] –í–∫–ª–∞–¥–∫–∞ ¬´–ù–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ¬ª, —Å–æ–±—ã—Ç–∏—è –∏ –ø–µ—Ä–µ—Ö–æ–¥—ã –∫ –ø—Ä–æ—Ñ–∏–ª—è–º
[x] –õ–µ–Ω—Ç–∞ —Å–æ–±—ã—Ç–∏–π: –±—ã—Å—Ç—Ä—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è, —Ñ–∏–ª—å—Ç—Ä –ø–æ –ø–µ—Ä—Å–æ–Ω–∞–∂—É
[x] –°–∞–π–¥–±–∞—Ä: –º–µ—Ç—Ä–∏–∫–∏ NPC —Ä–µ–∞–∫—Ü–∏–π/–∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤/–Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è/—Ä–µ—à–µ–Ω–∏–π
[x] –õ–µ–Ω—Ç–∞ —Å–æ–±—ã—Ç–∏–π/–ø–æ–≥–æ–¥–Ω–∞—è –≤–∏—Ç—Ä–∏–Ω–∞ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ SignalR (fallback –≤–∫–ª—é—á–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –æ–±—Ä—ã–≤–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è)
[x] EconomyPanel –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø–æ—Ç–æ–∫–æ–≤–æ (SignalR ‚Üí –∞–≤—Ç–æ-—Ä–µ—Ñ—Ä–µ—à —Å—Ç–∞–∫–∞–Ω–∞/—Å–¥–µ–ª–æ–∫ –±–µ–∑ —Ä—É—á–Ω–æ–≥–æ refresh)
[ ] EconomyPanel: —Å—Ç–∞–∫–∞–Ω –∑–∞—è–≤–æ–∫ –∏ –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Å–¥–µ–ª–∫–∏ (E1)
[ ] –ü–∞–Ω–µ–ª—å –∑–∞–ø–∞—Å–∞/–∏–Ω–≤–µ–Ω—Ç–∞—Ä—è –ø–æ –ª–æ–∫–∞—Ü–∏—è–º/–≤–ª–∞–¥–µ–ª—å—Ü–∞–º

## 18) –ú–µ—Ç—Ä–∏–∫–∏ –∏ —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å
[x] –ë–æ–ª—å—à–µ —Å—á—ë—Ç—á–∏–∫–æ–≤: `npc.replies`, `orders.active`, `orders.filled`, `trades.24h` (–Ω–æ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏ —á–µ—Ä–µ–∑ OpenTelemetry `imperium_*`)
[ ] –ü–µ—Ä‚Äë–∞–≥–µ–Ω—Ç–Ω—ã–µ —Ç–∞–π–º–∞—É—Ç—ã/—Ä–µ—Ç—Ä–∞–∏ –∫–∞–∫ –ø–æ–ª–∏—Ç–∏–∫–∏ (–∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º—ã–µ)
[x] –¢—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞ traceId ‚Üí –∑–∞–ø–∏—Å—å –≤ `GameEvent.PayloadJson.meta.traceId`

---

## –ü—Ä–µ–¥–ª–∞–≥–∞–µ–º—ã–π –ø–æ—Ä—è–¥–æ–∫ —Ä–∞–±–æ—Ç (–∏—Ç–µ—Ä–∞—Ü–∏–∏)
1) E1 Fast‚Äëtrack —Ä—ã–Ω–æ–∫ –Ω–∞ —Å–æ–±—ã—Ç–∏—è—Ö (–º–∏–Ω–∏–º—É–º –º–∏–≥—Ä–∞—Ü–∏–π, –±—ã—Å—Ç—Ä—ã–π –≤–∏–∑—É–∞–ª—å–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç)
2) –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω—ã–π `InheritanceService` (–ø–µ—Ä–µ–Ω–æ—Å –±–æ–≥–∞—Ç—Å—Ç–≤–∞/–≤–ª–∞–¥–µ–Ω–∏–π) + —Ç–µ—Å—Ç—ã
3) EconomyPanel ‚Äî —Å—Ç–∞–∫–∞–Ω + —Å–¥–µ–ª–∫–∏; —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –ø—Ä–æ—Å–º–æ—Ç—Ä–∞
4) E2 –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏ —Ä—ã–Ω–∫–∞ + –º–∏–≥—Ä–∞—Ü–∏–∏
5) E3 –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ/–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ; –∑–∞—Ç–µ–º E4 –ª–æ–≥–∏—Å—Ç–∏–∫–∞

–ï—Å–ª–∏ –æ–∫ ‚Äî —Å—Ç–∞—Ä—Ç—É—é —Å E1 (fast‚Äëtrack —Ä—ã–Ω–æ–∫ –Ω–∞ GameEvent) –∏ –ø–æ–∫–∞–∂—É –ø–µ—Ä–≤—ã–µ —Å–¥–µ–ª–∫–∏ –∏ —Å—Ç–∞–∫–∞–Ω –∑–∞—è–≤–æ–∫ –≤ UI.
