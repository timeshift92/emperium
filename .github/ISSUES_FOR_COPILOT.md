# üß± –ó–∞–¥–∞—á–∏ –¥–ª—è Copilot ‚Äî Imperium Universe (v4)

## 0) –û—Å–Ω–æ–≤—ã –ø—Ä–æ–µ–∫—Ç–∞
- [x] Aspire-—Ä–µ—à–µ–Ω–∏–µ: Api/Domain/Infrastructure/Llm/AppHost/ServiceDefaults
- [x] EF Core SQLite, –º–∏–≥—Ä–∞—Ü–∏–∏, —Å–∏–¥–µ—Ä—ã (`db.Database.Migrate()` –Ω–∞ —Å—Ç–∞—Ä—Ç–µ)
- [x] TickWorker: —É–ø–æ—Ä—è–¥–æ—á–µ–Ω–Ω—ã–µ —Ñ–∞–∑—ã (Time ‚Üí Weather/Season ‚Üí Economy ‚Üí NPC ‚Üí Dispatch)
- [ ] –ú–µ—Ç—Ä–∏–∫–∏/–Ω–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç—å: OpenTelemetry/Prometheus, —Å—á—ë—Ç—á–∏–∫–∏ —Ç–∏–∫–æ–≤, LLM-–≤—ã–∑–æ–≤–æ–≤, –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ñ–∞–∑

## 1) –ú–æ–¥–µ–ª–∏ –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç
- [x] WorldTime, SeasonState, WeatherSnapshot
- [x] Location, Faction (—Å–∫–µ–ª–µ—Ç), Army (—Å–∫–µ–ª–µ—Ç)
- [x] Character (+`EssenceJson`, `SkillsJson`, `History`, `LocationName`)
- [x] Relationship (`SourceId`, `TargetId`, `Type`, `Trust`, `Love`, `Hostility`)
- [x] Ownership (–±–∞–∑–æ–≤–∞—è), NpcMemory (—Å–∫–µ–ª–µ—Ç)
- [x] EconomySnapshot, Building (—Å–∫–µ–ª–µ—Ç)
- [ ] Household (–≥–ª–∞–≤–∞, —á–ª–µ–Ω—ã, –∏–º—É—â–µ—Å—Ç–≤–æ, –æ–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞)
- [ ] InheritanceRecord (–ø—Ä–∞–≤–∏–ª–∞ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è, —Å–ø–æ—Ä)
- [ ] Genealogy (—Ä–æ–¥—Å—Ç–≤–æ, —Å–µ–º–µ–π–Ω—ã–µ –≤–µ—Ç–≤–∏)
- [ ] TalentDevelopment (aptitude, —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏, –æ–ø—ã—Ç –ø–æ –ø–æ–¥‚Äë—Å–∫–∏–ª–ª–∞–º)
- [ ] Technology, KnowledgeField, Discovery, KnowledgeWave, RegionalKnowledge
- [ ] Rumor (–∏—Å—Ç–æ—á–Ω–∏–∫/–¥–æ—Å—Ç–æ–≤–µ—Ä–Ω–æ—Å—Ç—å/—Ä–∞–¥–∏—É—Å/TTL)
- [ ] Deity, Cult, Ritual, Festival
- [ ] HealthState, Livestock/Fishery/Hunting —Ä–µ—Å—É—Ä—Å—ã
- [ ] CommRoute, Courier/PigeonPost (–º–∞—Ä—à—Ä—É—Ç—ã –∏ –≤—Ä–µ–º—è –¥–æ—Å—Ç–∞–≤–∫–∏)
- [x] WorldChronicle, GameEvent

## 2) –ê–≥–µ–Ω—Ç—ã (–º–∏–Ω–∏–º–∞–ª—å–Ω–æ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω—ã–π –º–∏—Ä)
- [x] TimeAI ‚Äî —Ö–æ–¥ –≤—Ä–µ–º–µ–Ω–∏/—Å—É—Ç–æ–∫
- [x] WeatherAI/WorldAI ‚Äî –ø–æ–≥–æ–¥–∞, –¥–ª–∏–Ω–∞ –¥–Ω—è, –∞–Ω–æ–º–∞–ª–∏–∏
- [x] SeasonAI ‚Äî —Å–µ–∑–æ–Ω –ø–æ –∫–ª–∏–º–∞—Ç—É/–≥–µ–æ
- [x] EconomyAI ‚Äî —Ü–µ–Ω—ã, –Ω–∞–ª–æ–≥–∏, –∑–∞–ø–∞—Å—ã
- [x] RelationshipAI ‚Äî marriage/betrayal/child_birth
- [x] NpcAI ‚Äî –∫–æ—Ä–æ—Ç–∫–∏–µ —Ä–µ–ø–ª–∏–∫–∏ (<=35 —Å–ª–æ–≤, —ç–ø–æ—Ö–∞–ª—å–Ω—ã–π —Å—Ç–∏–ª—å)
- [x] EventDispatcher ‚Äî –∑–∞–ø–∏—Å—å/—Å—Ç—Ä–∏–º `GameEvent`
- [ ] NatureAI ‚Äî —É—Ä–æ–∂–∞–π, —Ñ–∞—É–Ω–∞, —ç–ø–∏–¥–µ–º–∏–∏
- [ ] PropertyAI ‚Äî –ø–µ—Ä–µ—Ö–æ–¥—ã –∏–º—É—â–µ—Å—Ç–≤–∞, –∞—Ä–µ–Ω–¥–∞, –∫–æ–Ω—Ñ–∏—Å–∫–∞—Ü–∏–∏
- [ ] InheritanceAI ‚Äî —Å–º–µ—Ä—Ç–∏, –∑–∞–≤–µ—â–∞–Ω–∏—è, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ Household/Genealogy
- [ ] KnowledgeAI ‚Äî –ø—Ä–æ–≥—Ä–µ—Å—Å –æ–±–ª–∞—Å—Ç–µ–π –∑–Ω–∞–Ω–∏–π, –ª–æ–∫–∞–ª—å–Ω—ã–µ –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã
- [ ] InnovationAI ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π/–æ—Ç–∫—Ä—ã—Ç–∏–π
- [ ] KnowledgeDiffusionAI ‚Äî —Ç–æ—Ä–≥–æ–≤—ã–µ –ø—É—Ç–∏/–≥–æ–Ω—Ü—ã/–≥–æ–ª—É–±–∏/–º–æ–Ω–∞—Ö–∏
- [ ] ScholarAI ‚Äî —à–∫–æ–ª—ã, –º–∞—Å—Ç–µ—Ä-–ø–æ–¥–º–∞—Å—Ç–µ—Ä—å–µ, –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –ø–æ–¥-–Ω–∞–≤—ã–∫–∏
- [ ] CrimeAI/LegalAI v2 ‚Äî –ø—Ä–µ—Å—Ç—É–ø–ª–µ–Ω–∏—è, —Å—É–¥, –Ω–∞–∫–∞–∑–∞–Ω–∏—è, –ø—Ä–µ—Ü–µ–¥–µ–Ω—Ç—ã
- [ ] LogisticsAI ‚Äî –∫–∞—Ä–∞–≤–∞–Ω—ã/—Ñ–ª–æ—Ç, —à—Ç–æ—Ä–º—ã, –ø–∏—Ä–∞—Ç—ã
- [ ] MarketAI ‚Äî —Å–ø—Ä–æ—Å/–ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ, –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å
- [ ] CraftAI ‚Äî –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ, –±—Ä–∞–∫, –∏–∑–Ω–æ—Å
- [ ] TransportAI ‚Äî —Å—Ç–æ–∏–º–æ—Å—Ç—å/–≤—Ä–µ–º—è –¥–æ—Å—Ç–∞–≤–∫–∏, —Ä–∏—Å–∫–∏
- [ ] FreeWillAI/MoralAI ‚Äî —Ä–µ—à–µ–Ω–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –º–æ—Ä–∞–ª–∏/—Ä–µ–ø—É—Ç–∞—Ü–∏–∏
- [ ] PerceptionAI ‚Äî –æ–±—â–µ—Å—Ç–≤–µ–Ω–Ω–∞—è —Ä–µ–∞–∫—Ü–∏—è
- [ ] FaithAI/MythosAI/DreamAI/CultureAI ‚Äî —Ä–∏—Ç—É–∞–ª—ã, –∑–Ω–∞–º–µ–Ω–∏—è, —Å–Ω—ã, –ø—Ä–∞–∑–¥–Ω–∏–∫–∏
- [ ] HistoryAI/DeepHistoryAI/ZeitgeistAI ‚Äî —Ö—Ä–æ–Ω–∏–∫–∏, –ø–∞–º—è—Ç—å —ç–ø–æ—Ö, –¥—É—Ö –≤—Ä–µ–º–µ–Ω–∏
- [ ] ConflictAI/EmpireAI/PoliticsAI ‚Äî –≤–æ–π–Ω—ã, –≤—ã–±–æ—Ä—ã, –∑–∞–≥–æ–≤–æ—Ä—ã

## 3) –ß–µ–ª–æ–≤–µ–∫, –Ω–∞–≤—ã–∫–∏, —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
- [ ] GeneticAI ‚Äî –Ω–∞—Å–ª–µ–¥—É–µ–º—ã–µ —Å–∫–ª–æ–Ω–Ω–æ—Å—Ç–∏, –º—É—Ç–∞—Ü–∏–∏ –ø—Ä–∏ —Ä–æ–∂–¥–µ–Ω–∏–∏
- [ ] TalentAI ‚Äî –∞–∫—Ç–∏–≤–∞—Ü–∏—è –≤—Ä–æ–∂–¥—ë–Ω–Ω—ã—Ö/—Å–∫—Ä—ã—Ç—ã—Ö —Ç–∞–ª–∞–Ω—Ç–æ–≤
- [ ] TraitAI ‚Äî —Å–æ—Å—Ç–æ—è–Ω–∏—è, –∞–Ω–æ–º–∞–ª–∏–∏, –±–æ–ª–µ–∑–Ω–∏
- [ ] SkillAI ‚Äî —Ä–æ—Å—Ç/–¥–µ–≥—Ä–∞–¥–∞—Ü–∏—è, –ø–æ–¥-–¥–∏—Å—Ü–∏–ø–ª–∏–Ω—ã (–ø—Ä–∏–º–µ—Ä: –≤–æ–∏–Ω‚Üí—Ç–∞–∫—Ç–∏–∫/–æ—Å–∞–¥–∞/—Ñ–ª–æ—Ç)
- [ ] Training/Institutions ‚Äî –æ–±—É—á–µ–Ω–∏–µ —É –º–∞—Å—Ç–µ—Ä–æ–≤, —Å—Ç–æ–∏–º–æ—Å—Ç—å –∏ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- [ ] NpcMemory v2 ‚Äî –¥–æ–ª–≥–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –ø–∞–º—è—Ç—å, –æ–±–µ—â–∞–Ω–∏—è/–¥–æ–ª–≥–∏, –ª–æ–∫–∞–ª—å–Ω—ã–µ —Å–ª—É—Ö–∏

## 4) –ó–Ω–∞–Ω–∏—è –∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
- [ ] –ú–æ–¥–µ–ª–∏: KnowledgeField, Technology, Discovery, RegionalKnowledge, KnowledgeWave
- [ ] –ê–≥–µ–Ω—Ç—ã: KnowledgeAI, InnovationAI, KnowledgeDiffusionAI, ScholarAI
- [ ] –ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏: —Ç–æ—Ä–≥–æ–≤—Ü—ã/–≥–æ–Ω—Ü—ã/–≥–æ–ª—É–±–∏–Ω–∞—è –ø–æ—á—Ç–∞/–º–æ–Ω–∞—Ö–∏, –∑–∞–¥–µ—Ä–∂–∫–∏, –∏–∑–æ–ª—è—Ü–∏—è —Ä–µ–≥–∏–æ–Ω–æ–≤

## 5) –í–µ—Ä–∞, –∫—É–ª—å—Ç—É—Ä–∞ –∏ –∏—Å—Ç–æ—Ä–∏—è
- [ ] –ú–æ–¥–µ–ª–∏: Deity, Cult, Ritual, Festival
- [ ] FaithAI/MythosAI/CultureAI ‚Äî —Ä–∏—Ç—É–∞–ª—ã, –∑–Ω–∞–º–µ–Ω–∏—è, –ø—Ä–∞–∑–¥–Ω–∏–∫–∏
- [ ] DreamAI ‚Äî —Å–Ω—ã –∫–∞–∫ –ø–æ–¥—Å–∫–∞–∑–∫–∏ –∏ —Å—é–∂–µ—Ç–Ω—ã–µ –∫—Ä—é—á–∫–∏
- [ ] HistoryAI ‚Äî –≥–æ–¥–æ–≤–æ–π summary, WorldChronicle
- [ ] DeepHistoryAI ‚Äî –ø–∞–º—è—Ç—å —ç–ø–æ—Ö
- [ ] ZeitgeistAI ‚Äî –¥—É—Ö –≤—Ä–µ–º–µ–Ω–∏, –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –≤–æ–π–Ω—ã/–æ—Ç–∫—Ä—ã—Ç–∏—è

## 6) –í–ª–∞—Å—Ç—å, –ø—Ä–∞–≤–æ –∏ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å
- [ ] OwnershipAI/PropertyAI ‚Äî —Ä—ã–Ω–æ–∫ –∑–µ–º–ª–∏/–¥–æ–º–æ–≤/—Å–∫–æ—Ç–∞, –∞—Ä–µ–Ω–¥–∞, –∫–æ–Ω—Ñ–∏—Å–∫–∞—Ü–∏–∏
- [ ] LegalAI v2 ‚Äî –∫–æ–¥–µ–∫—Å—ã, —Å—É–¥, —à—Ç—Ä–∞—Ñ—ã, —Å—Å—ã–ª–∫–∏, –ø—Ä–µ—Ü–µ–¥–µ–Ω—Ç—ã
- [ ] EmpireAI/PoliticsAI/ConflictAI ‚Äî –≤–Ω–µ—à–Ω—è—è –∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –¥–∏–Ω–∞–º–∏–∫–∞

## 7) –≠–∫–æ–Ω–æ–º–∏–∫–∞ –∏ –ª–æ–≥–∏—Å—Ç–∏–∫–∞
- [ ] CraftAI / MarketAI / TransportAI / LogisticsAI (–ø—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è –≤–µ—Ä—Å–∏—è)
- [ ] –£–∑–ª—ã —Ç–æ—Ä–≥–æ–≤–ª–∏ (–ø–æ—Ä—Ç/–±–∞–∑–∞—Ä/—Å–∫–ª–∞–¥), –≤–ª–∏—è–Ω–∏–µ —à—Ç–æ—Ä–º–æ–≤/–≤–µ—Ç—Ä–æ–≤
- [ ] –†—ã–±–æ–ª–æ–≤—Å—Ç–≤–æ/–æ—Ö–æ—Ç–∞/—Å–∫–æ—Ç–æ–≤–æ–¥—Å—Ç–≤–æ ‚Äî —Å–µ–∑–æ–Ω–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

## 8) –ü—Ä–æ–º–ø—Ç—ã (Prompts.cs) ‚Äî —Å—Ç—Ä–æ–≥–æ JSON
- [x] WeatherSnapshot ‚Üí { condition, temperatureC, windKph, precipitationMm, dayLength }
- [x] NpcReply ‚Üí { reply, moodDelta?, loyaltyDelta? }
- [ ] KnowledgeDiscovery ‚Üí { name, field, effect, impact, region }
- [ ] RumorPrompt ‚Üí { text, credibility, spreadRadiusKm, ttlTicks }
- [ ] LegalDecision ‚Üí { verdict, penalty, precedentNote }
- [ ] HistorySummary ‚Üí { summary, highlights[] }
- [ ] Dream ‚Üí { symbol, meaning, action }
- [ ] MythosEffect ‚Üí { omen, crowdEffect, duration }

## 9) –°–∏–¥ –Ω–∞—á–∞–ª—å–Ω–æ–≥–æ –º–∏—Ä–∞ (Sicilia Seed)
- [ ] –ì–µ–æ–≥—Ä–∞—Ñ–∏—è: –°–∏—Ä–∞–∫—É–∑—ã + –¥–µ—Ä–µ–≤–Ω–∏, –ø–æ—Ä—Ç, —Ö—Ä–∞–º, –º–∞—Å—Ç–µ—Ä—Å–∫–∏–µ, —Ä—ã–±–∞—Ü–∫–∞—è –∞—Ä—Ç–µ–ª—å
- [ ] –§—Ä–∞–∫—Ü–∏–∏: —Å–æ–≤–µ—Ç, —Ä–µ–º–µ—Å–ª–µ–Ω–Ω–∏–∫–∏, —Ç–æ—Ä–≥–æ–≤—Ü—ã, –∂—Ä–µ—Ü—ã, –≥–∞—Ä–Ω–∏–∑–æ–Ω
- [ ] –¢–æ—Ä–≥–æ–≤—ã–µ –ª–∏–Ω–∏–∏: –ø—Ä–∏–±—Ä–µ–∂–Ω—ã–µ —Ä–µ–π—Å—ã, –∫–∞—Ä–∞–≤–∞–Ω—ã –≤–≥–ª—É–±—å –æ—Å—Ç—Ä–æ–≤–∞
- [ ] –ù–∞—á–∞–ª—å–Ω—ã–µ –∑–Ω–∞–Ω–∏—è/—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏: –∞–Ω—Ç–∏—á–Ω—ã–π baseline
- [ ] –ù–∞—á–∞–ª—å–Ω—ã–µ —à–∫–æ–ª—ã/–º–∞—Å—Ç–µ—Ä–∞ –∏ —É—á–µ–Ω–∏–∫–∏
- [ ] –†–µ–ø—É—Ç–∞—Ü–∏–∏ –∏ —Å–µ–º–µ–π–Ω—ã–µ –ª–∏–Ω–∏–∏ –¥–ª—è —Å—Ç–∞—Ä—Ç–∞

## 10) API / Frontend (MVP Web)
- [x] REST: `/api/characters`, `/api/characters/{id}`, `/api/characters/{id}/events`
- [x] Dev endpoints: `/api/dev/seed-characters`, `/api/dev/reset-characters`, `/api/dev/tick-now`
- [x] SSE `/api/events/stream` (—á–µ—Ä–µ–∑ EventDispatcher)
- [ ] SignalR `/hubs/events` (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ SSE)
- [x] Frontend v2: –≤–∫–ª–∞–¥–∫–∏ ‚Äú–°–æ–±—ã—Ç–∏—è/–ü–µ—Ä—Å–æ–Ω–∞–∂–∏/–≠–∫–æ–Ω–æ–º–∏–∫–∞‚Äù, —Ñ–∏–ª—å—Ç—Ä—ã –∏ –ø–æ–∏—Å–∫
- [ ] –ü–∞–Ω–µ–ª—å —ç–∫–æ–Ω–æ–º–∏–∫–∏ —Å –∂–∏–≤—ã–º–∏ –º–µ—Ç—Ä–∏–∫–∞–º–∏ (—Ü–µ–Ω–æ–≤—ã–µ —Ä—è–¥—ã, –∑–∞–ø–∞—Å—ã, –Ω–∞–ª–æ–≥–∏)
- [ ] –ü–∞–Ω–µ–ª—å —É–∫–∞–∑–æ–≤ (Council) —Å —Ä–µ—à–µ–Ω–∏—è–º–∏ EconomyAI/LegalAI
- [ ] –ö–∞—Ä—Ç–∞ —Å –º–∞—Ä—à—Ä—É—Ç–∞–º–∏/—à—Ç–æ—Ä–º–∞–º–∏/–∫–∞—Ä–∞–≤–∞–Ω–∞–º–∏, –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—ã–º–∏ –æ–±—ä–µ–∫—Ç–∞–º–∏

## 11) –ù–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç—å, —Ç–µ—Å—Ç—ã, –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å
- [ ] OpenTelemetry/Prometheus: durata —Ñ–∞–∑ —Ç–∏–∫–∞, —á–∞—Å—Ç–æ—Ç–∞/–æ—à–∏–±–∫–∏ LLM
- [ ] –Æ–Ω–∏—Ç-—Ç–µ—Å—Ç—ã: NpcAgent, Prompts, RoleLlmRouter, KnowledgeDiffusion
- [ ] –ù–∞–≥—Ä—É–∑–æ—á–Ω—ã–π —Ä–µ–∂–∏–º ‚Äú1000 —Ç–∏–∫–æ–≤ –±–µ–∑ –æ—à–∏–±–æ–∫‚Äù + –æ—Ç—á—ë—Ç
- [ ] –§–µ–π–∫–æ–≤—ã–µ LLM-–∫–ª–∏–µ–Ω—Ç—ã –∏ –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–∏–¥—ã –¥–ª—è –æ—Ñ–ª–∞–π–Ω–∞

## 12) MVP-–≤–∞–ª–∏–¥–∞—Ç–æ—Ä
- [ ] 1000 —Ç–∏–∫–æ–≤ –±–µ–∑ –æ—à–∏–±–æ–∫
- [ ] –í –ë–î: —Å–º–µ–Ω—ã –¥–Ω—è/–≥–æ–¥–∞, —Å–µ–∑–æ–Ω—ã, –ø–æ–≥–æ–¥–∞, –±–∞–∑–æ–≤–∞—è —ç–∫–æ–Ω–æ–º–∏–∫–∞
- [ ] –°–æ–±—ã—Ç–∏—è: discovery, festival, rumor, battle, legal_verdict, season_change, day_change, year_change
- [ ] –ù–∞–≤—ã–∫–∏ NPC –º–µ–Ω—è—é—Ç—Å—è –æ—Ç –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏/–æ–±—É—á–µ–Ω–∏—è
- [ ] –ì–æ–¥–æ–≤–æ–π summary (HistoryAI) –≤ WorldChronicle
- [ ] –ò–≥—Ä–æ–∫ —É–º–∏—Ä–∞–µ—Ç ‚Üí –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ –Ω–∞—Å–ª–µ–¥–Ω–∏–∫–∞ (Genealogy/Inheritance)

## 13) –ù–µ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- [ ] –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∏ PR ‚Äî —Ç–æ–ª—å–∫–æ –Ω–∞ —Ä—É—Å—Å–∫–æ–º
- [ ] LLM ‚Äî —Å—Ç—Ä–æ–≥–æ –∫–æ–º–ø–∞–∫—Ç–Ω—ã–π JSON
- [ ] –ß–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞: Domain —Å–æ–¥–µ—Ä–∂–∏—Ç –ø—Ä–∞–≤–∏–ª–∞ –º–∏—Ä–∞, API ‚Äî –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è
- [x] –í—Å–µ –∞–≥–µ–Ω—Ç—ã –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç `GameEvent` –∏ –Ω–µ –±–ª–æ–∫–∏—Ä—É—é—Ç —Ç–∏–∫ (—á–µ—Ä–µ–∑ EventDispatcher)

## –°–¥–µ–ª–∞–Ω–æ (–∫—Ä–∞—Ç–∫–æ)
- **Backend**
  - `RoleLlmRouter`: —Ä–æ—É—Ç–∏–Ω–≥ role ‚Üí model, –ø–æ–¥–¥–µ—Ä–∂–∫–∞ Ollama/OpenAI (fallback + –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ).
  - `NpcAgent`: —Å—Ç—Ä–æ–≥–∏–µ JSON-–æ—Ç–≤–µ—Ç—ã, —É–º–µ–Ω—å—à–µ–Ω–æ —á–∏—Å–ª–æ reask, —Ç–∞–π–º–∞—É—Ç—ã –∏ –ø–∞—Ä—Å–∏–Ω–≥ `characterId/essence/skills/history`.
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –º–∏–≥—Ä–∞—Ü–∏—è –ë–î –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ (`db.Database.Migrate()`), —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ `Character`.
  - –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–ª—è –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π, —Å–æ–±—ã—Ç–∏–π, –¥–µ–≤-–æ–ø–µ—Ä–∞—Ü–∏–π; SSE `/api/events/stream`.
  - `Relationship` + `RelationshipAI`: —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–≤—è–∑–µ–π, —Å–æ–±—ã—Ç–∏—è `marriage`, `betrayal`, `child_birth`.
  - `EventDispatcherService`: —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–∞–Ω–∞–ª –¥–ª—è –∑–∞–ø–∏—Å–∏/—Å—Ç—Ä–∏–º–∞ `GameEvent` (—Ñ–∏–∫—Å –¥–≤–æ–π–Ω–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏).

- **Frontend**
  - `NpcProfiles.tsx`: —Å–ø–∏—Å–æ–∫, –ø—Ä–æ—Ñ–∏–ª—å, live‚Äëtimeline (SSE + –∞–≤—Ç–æ-—Ä–µ–∫–æ–Ω–Ω–µ–∫—Ç).
  - –û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π –¥–∞—à–±–æ—Ä–¥: –±–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å —Å—Ç–∞—Ç—É—Å–∞ –º–∏—Ä–∞, –≤–∫–ª–∞–¥–∫–∏, EventsList —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏ –∏ –ø–æ–∏—Å–∫–æ–º, –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–≥–æ–¥—ã/—ç–∫–æ–Ω–æ–º–∏–∫–∏.

- **Dev / Tooling**
  - PowerShell-—Å–∫—Ä–∏–ø—Ç—ã `smoke-test.ps1`, `check-apis.ps1`.
  - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –∑–∞–ø—É—Å–∫—É API –≤ foreground/background, helper —à–∞–≥–∏.

## –ü—Ä–∏–º–µ—á–∞–Ω–∏—è / —Ä–∏—Å–∫–∏
- LLM –∏–Ω–æ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ª–∞—Ç–∏–Ω–∏—Ü—É ‚Äî `NpcAgent` —Å–º—è–≥—á—ë–Ω, –Ω–æ –Ω—É–∂–Ω–æ –¥–∞–ª—å–Ω–µ–π—à–µ–µ —É–ª—É—á—à–µ–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–æ–≤.
- –í—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–µ –º–æ–¥–µ–ª–∏ (KnowledgeWave, DeepHistory, TalentAI –∏ –ø—Ä.) –µ—â—ë –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã ‚Äî –æ–∂–∏–¥–∞—é—Ç —Å–ª–µ–¥—É—é—â–µ–≥–æ —ç—Ç–∞–ø–∞.

## –ß—Ç–æ –¥–∞–ª—å—à–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É—é
1. –ü—Ä–æ–≥–Ω–∞—Ç—å `POST /api/dev/seed-characters`, `POST /api/dev/tick-now`, –∑–∞—Ç–µ–º `GET /api/events?type=npc_reply&count=50` ‚Äî —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ RelationshipAI –∏ NpcAI –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç —Å–æ–±—ã—Ç–∏—è.
2. –î–æ–±–∞–≤–∏—Ç—å unit-—Ç–µ—Å—Ç—ã –¥–ª—è –ø—Ä–æ–º–ø—Ç–æ–≤ –∏ –∞–≥–µ–Ω—Ç–æ–≤ (`MockLlmClient`), –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç—å (Prometheus + OTEL).
3. –†–∞—Å—à–∏—Ä–∏—Ç—å —Å–∏–¥ (Sicilia Seed) –∏ –¥–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–≤—ã–µ –ø–∞–Ω–µ–ª–∏ —ç–∫–æ–Ω–æ–º–∏–∫–∏/–º–µ—Ç—Ä–∏–∫ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ.
